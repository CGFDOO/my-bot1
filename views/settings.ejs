<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Control | ุฅุนุฏุงุฏุงุช ุงูุณูุฑูุฑ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Tajawal', 'sans-serif'] },
                    colors: {
                        brand: { DEFAULT: '#5865F2', dark: '#4752C4', light: '#7289DA' },
                        dark: { 900: '#0b0f19', 800: '#151b2b', 700: '#1f2937', 600: '#334155' }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0b0f19; color: #f8fafc; overflow-x: hidden; scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0b0f19; }
        ::-webkit-scrollbar-thumb { background: #1f2937; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #5865F2; }
        
        .glass-card {
            background: rgba(21, 27, 43, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }
        
        .input-glow:focus { box-shadow: 0 0 0 3px rgba(88, 101, 242, 0.25); border-color: #5865F2; outline: none; }
        
        /* ุชุฃุซูุฑ ุงูููุงุชูุญ (Toggle Switches) */
        .toggle-checkbox:checked { right: 0; border-color: #10B981; }
        .toggle-checkbox:checked + .toggle-label { background-color: #10B981; }
        .toggle-checkbox { right: 0; z-index: 1; border-color: #374151; transition: all 0.3s ease; }
        .toggle-label { width: 3rem; height: 1.5rem; background-color: #374151; border-radius: 9999px; transition: all 0.3s ease; }
        
        .settings-section { display: none; animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .settings-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<% 
    // =========================================================================================
    // ๐ง ุงูุนูู ุงููุฏุจุฑ ูุฌูุจ ุจูุงูุงุช ุงูุณูุฑูุฑ (ุงูุฑููุงุชุ ุงูุฃูุณุงูุ ุงูุฑุชุจ)
    // =========================================================================================
    let textChannels = [];
    let voiceChannels = [];
    let categories = [];
    let serverRoles = [];
    let guildName = "Unknown Server";
    let guildIconUrl = "https://cdn.discordapp.com/embed/avatars/0.png";

    if (bot && guildId) {
        const currentGuild = bot.guilds.cache.get(guildId);
        if (currentGuild) {
            guildName = currentGuild.name;
            if (currentGuild.icon) guildIconUrl = `https://cdn.discordapp.com/icons/${guildId}/${currentGuild.icon}.png`;
            
            textChannels = currentGuild.channels.cache.filter(c => c.type === 0 || c.type === 5).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            voiceChannels = currentGuild.channels.cache.filter(c => c.type === 2).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            categories = currentGuild.channels.cache.filter(c => c.type === 4).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            serverRoles = currentGuild.roles.cache.filter(r => r.id !== guildId).sort((a, b) => b.position - a.position).map(r => ({ id: r.id, name: r.name, color: r.hexColor }));
        }
    }
%>

<body class="flex h-screen overflow-hidden selection:bg-brand selection:text-white">

    <aside class="w-72 flex-shrink-0 border-l border-dark-700 bg-dark-800 flex flex-col z-20 shadow-2xl">
        <div class="h-24 flex flex-col items-center justify-center border-b border-dark-700 px-4 bg-dark-900/50 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-brand/20 to-transparent opacity-50"></div>
            <h1 class="text-2xl font-black text-white tracking-wider relative z-10">MNC <span class="text-brand">CONTROL</span></h1>
            <p class="text-xs text-slate-400 font-bold uppercase tracking-widest mt-1 relative z-10">Ultimate Enterprise</p>
        </div>

        <nav class="flex-1 overflow-y-auto py-6 px-4 space-y-1.5 custom-scrollbar" id="sidebar-nav">
            
            <div class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 mt-2 px-2">ุงูุฃุณุงุณูุงุช</div>
            <button onclick="switchSection('general')" class="nav-btn active-nav w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 bg-brand text-white shadow-lg shadow-brand/20" data-target="general">
                <span>โ๏ธ</span> <span class="font-bold text-sm">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ูุงูุฃููุงู</span>
            </button>
            <button onclick="switchSection('live_embed')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="live_embed">
                <span>๐จ</span> <span class="font-bold text-sm">ุตุงูุน ุงูุฅููุจุฏ ุงูุญุฑ</span>
            </button>

            <div class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 mt-6 px-2">ุงูุชุฐุงูุฑ ูุงููุณุงุทุฉ</div>
            <button onclick="switchSection('middleman')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="middleman">
                <span>โ๏ธ</span> <span class="font-bold text-sm">ูุธุงู ุงููุณุงุทุฉ (ุงููุนุฒูู)</span>
            </button>
            <button onclick="switchSection('custom_panels')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="custom_panels">
                <span>๐ซ</span> <span class="font-bold text-sm">ุงูุจุงููุงุช ุงููุชุนุฏุฏุฉ (ุงูุฏููุงููููุฉ)</span>
            </button>
            <button onclick="switchSection('ticket_controls')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="ticket_controls">
                <span>๐๏ธ</span> <span class="font-bold text-sm">ุงูุชุญูู ุงูุฐูู ูุงูุชุฑุงูุณูุฑูุจุช</span>
            </button>

            <div class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 mt-6 px-2">ุงูุชููููุงุช ูุงูุฃูุงูุฑ</div>
            <button onclick="switchSection('ratings')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="ratings">
                <span>โญ</span> <span class="font-bold text-sm">ุงูุชููููุงุช (ุฏุนู/ูุณุงุทุฉ)</span>
            </button>
            <button onclick="switchSection('roles')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="roles">
                <span>๐</span> <span class="font-bold text-sm">ุงูุฑุชุจ ูุงูุตูุงุญูุงุช ุงูุนููุง</span>
            </button>
            <button onclick="switchSection('commands')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="commands">
                <span>โจ๏ธ</span> <span class="font-bold text-sm">ุชุฎุตูุต ุงูุฃูุงูุฑ</span>
            </button>

            <div class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 mt-6 px-2">ุงูุญูุงูุฉ ูุงููุฑุงูุจุฉ</div>
            <button onclick="switchSection('protection')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="protection">
                <span>๐ก๏ธ</span> <span class="font-bold text-sm">ุงูุญูุงูุฉ (Anti-Nuke/Spam)</span>
            </button>
            <button onclick="switchSection('warnings')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="warnings">
                <span>โ๏ธ</span> <span class="font-bold text-sm">ูุธุงู ุงูุชุญุฐูุฑุงุช ูุงูููุงููู</span>
            </button>
            <button onclick="switchSection('logs')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="logs">
                <span>๐</span> <span class="font-bold text-sm">ุณุฌูุงุช ุงูุณูุฑูุฑ ุงูุฏูููุฉ (Logs)</span>
            </button>

            <div class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 mt-6 px-2">ุงูุฃุนุถุงุก ูุงูุชูุงุนู</div>
            <button onclick="switchSection('welcome')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="welcome">
                <span>๐</span> <span class="font-bold text-sm">ุงูุชุฑุญูุจ ุงููููู ูุงููุบุงุฏุฑุฉ</span>
            </button>
            <button onclick="switchSection('auto_roles')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="auto_roles">
                <span>๐ค</span> <span class="font-bold text-sm">ุงูุฑุฏ ูุงูุฑุชุจ ุงูุชููุงุฆูุฉ</span>
            </button>
            <button onclick="switchSection('leveling')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="leveling">
                <span>๐</span> <span class="font-bold text-sm">ูุธุงู ุงููููุงุช (Leveling)</span>
            </button>
            <button onclick="switchSection('economy')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="economy">
                <span>๐ฐ</span> <span class="font-bold text-sm">ุงูุงูุชุตุงุฏ ูุงูุฃูุนุงุจ (Economy)</span>
            </button>
            <button onclick="switchSection('ai_system')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-amber-400 hover:bg-dark-700" data-target="ai_system">
                <span>โจ</span> <span class="font-bold text-sm">ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI)</span>
            </button>

        </nav>

        <div class="p-4 border-t border-dark-700 bg-dark-900/30">
            <a href="/dashboard" class="flex items-center justify-center w-full px-4 py-3 text-sm font-bold text-slate-300 transition-colors bg-dark-700 rounded-xl hover:bg-red-500 hover:text-white shadow-md">
                <span>ุงูุนูุฏุฉ ููุงุฆูุฉ ุงูุณูุฑูุฑุงุช</span> <span class="mr-2">๐</span>
            </a>
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen relative bg-dark-900">
        
        <div class="absolute top-0 right-0 w-full h-96 bg-gradient-to-b from-brand/10 to-transparent pointer-events-none z-0"></div>

        <header class="h-24 flex-shrink-0 border-b border-dark-700 bg-dark-800/80 backdrop-blur-xl flex items-center justify-between px-10 z-10 shadow-sm">
            <div class="flex items-center space-x-5 space-x-reverse">
                <img src="<%= guildIconUrl %>" alt="Guild Icon" class="w-14 h-14 rounded-xl border border-dark-600 shadow-lg object-cover">
                <div>
                    <h2 class="text-2xl font-black text-white tracking-wide"><%= guildName %></h2>
                    <p class="text-xs text-slate-400 font-mono mt-1 flex items-center">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 ml-2 animate-pulse"></span> Guild ID: <%= guildId %>
                    </p>
                </div>
            </div>
            
            <div class="flex items-center gap-4 bg-dark-900 py-2 px-5 rounded-full border border-dark-700 shadow-inner">
                <img class="h-9 w-9 rounded-full border border-slate-600" src="https://cdn.discordapp.com/avatars/<%= user.id %>/<%= user.avatar %>.png" alt="Avatar">
                <span class="text-sm font-bold text-slate-200"><%= user.username %></span>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-6 md:p-10 z-10 scroll-smooth relative custom-scrollbar" id="main-scroll-area">
            
            <% if (typeof success !== 'undefined' && success) { %>
                <div class="mb-8 bg-emerald-500/10 border-r-4 border-emerald-500 text-emerald-400 px-6 py-5 rounded-l-xl flex items-center shadow-lg mx-auto max-w-5xl">
                    <span class="text-2xl ml-4">โ</span>
                    <div>
                        <h4 class="font-bold text-lg">ุชู ุงูุญูุธ ุจูุฌุงุญ!</h4>
                        <p class="text-sm opacity-80">ุชู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ุนูู ุงูุณูุฑูุฑ ููุฑุงู.</p>
                    </div>
                </div>
            <% } %>

            <form action="/settings/<%= guildId %>/save" method="POST" id="mega-settings-form">
                
                <div id="section-general" class="settings-section active max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ูุงูุฃููุงู โ๏ธ</h2>
                        <p class="text-slate-400">ุงูุชุญูู ูู ุงูุจุงุฏุฆุฉุ ูุบุฉ ุงูุจูุชุ ูุชูุญูุฏ ุชุตููู ุงูุฅููุจุฏุงุช ูู ุงูุณูุฑูุฑ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-brand">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุจุงุฏุฆุฉ (Prefix)</label>
                                <input type="text" name="prefix" value="<%= config.prefix || '!' %>" required
                                    class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-5 text-white input-glow font-mono text-xl text-center">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุบุฉ ุงููุธุงู ุงูุฃุณุงุณูุฉ</label>
                                <select name="language" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-5 text-white input-glow font-bold cursor-pointer">
                                    <option value="ar" <%= config.language === 'ar' ? 'selected' : '' %>>๐ธ๐ฆ ุงูุนุฑุจูุฉ</option>
                                    <option value="en" <%= config.language === 'en' ? 'selected' : '' %>>๐บ๐ธ ุงูุฅูุฌููุฒูุฉ</option>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-xl font-bold text-white mb-6">๐จ ุชูุญูุฏ ุฃุดูุงู ุงูุฅููุจุฏ (Global Embeds)</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุต ุงูููุชุฑ ุงูููุญุฏ (Footer Text)</label>
                                <input type="text" name="emb_footerText" value="<%= config.embedSetup?.footerText || 'Enterprise System ยฉ 2024' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุฃููููุฉ ุงูููุชุฑ (Footer Icon URL)</label>
                                <input type="text" name="emb_footerIconUrl" value="<%= config.embedSetup?.footerIconUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow text-left font-mono text-sm" dir="ltr" placeholder="https://...">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุงูุตูุฑุฉ ุงูุฌุงูุจูุฉ ุงูููุญุฏุฉ (Thumbnail URL)</label>
                                <input type="text" name="emb_thumbnailUrl" value="<%= config.embedSetup?.thumbnailUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow text-left font-mono text-sm" dir="ltr" placeholder="https://...">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-xs font-bold text-slate-400 mb-2">โน๏ธ ุงูููู ุงูุฃุณุงุณู (Primary)</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_primary_picker" value="<%= config.embedSetup?.primaryColor || '#5865F2' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-600" onchange="document.getElementById('emb_primaryColor').value = this.value">
                                    <input type="text" id="emb_primaryColor" name="emb_primaryColor" value="<%= config.embedSetup?.primaryColor || '#5865F2' %>" class="flex-1 bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase text-center" oninput="document.getElementById('emb_primary_picker').value = this.value">
                                </div>
                            </div>
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-xs font-bold text-emerald-400 mb-2">โ ููู ุฑุณุงุฆู ุงููุฌุงุญ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_success_picker" value="<%= config.embedSetup?.successColor || '#3ba55d' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-600" onchange="document.getElementById('emb_successColor').value = this.value">
                                    <input type="text" id="emb_successColor" name="emb_successColor" value="<%= config.embedSetup?.successColor || '#3ba55d' %>" class="flex-1 bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase text-center" oninput="document.getElementById('emb_success_picker').value = this.value">
                                </div>
                            </div>
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-xs font-bold text-red-400 mb-2">โ ููู ุฑุณุงุฆู ุงูุฎุทุฃ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_error_picker" value="<%= config.embedSetup?.errorColor || '#ed4245' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-600" onchange="document.getElementById('emb_errorColor').value = this.value">
                                    <input type="text" id="emb_errorColor" name="emb_errorColor" value="<%= config.embedSetup?.errorColor || '#ed4245' %>" class="flex-1 bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase text-center" oninput="document.getElementById('emb_error_picker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-live_embed" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุตุงูุน ุงูุฅููุจุฏ ุงูุญุฑ ๐จ</h2>
                        <p class="text-slate-400">ูู ุจุชุตููู ุฑุณุงูุฉ ุฅููุจุฏ ูุฅุฑุณุงููุง ูุฃู ุฑูู ูู ุงูุณูุฑูุฑ ููุฑุงู ูู ููุญุฉ ุงูุชุญูู.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 border-t-4 border-t-fuchsia-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงุฎุชุฑ ุงูุฑูู ููุฅุฑุณุงู</label>
                                <select id="live_embed_channel" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>">๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุงูุฅููุจุฏ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="live_embed_color_picker" value="#5865F2" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('live_embed_color').value = this.value">
                                    <input type="text" id="live_embed_color" value="#5865F2" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('live_embed_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุนููุงู (Title)</label>
                            <input type="text" id="live_embed_title" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold text-lg" placeholder="ุงูุชุจ ุนููุงู ุงูุฅููุจุฏ ููุง...">
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุงููุตู / ุงูููุงููู (Description) - ูุฏุนู ุงูุฒุฎุงุฑู</label>
                            <textarea id="live_embed_desc" rows="6" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-4 px-5 text-white input-glow resize-y leading-relaxed" placeholder="ุงูุชุจ ูุญุชูู ุงูุฅููุจุฏ ููุง..."></textarea>
                        </div>

                        <div class="mb-8">
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
                            <input type="text" id="live_embed_image" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow text-left font-mono" dir="ltr" placeholder="https://...">
                        </div>

                        <div id="live_embed_status" class="hidden mb-6 px-5 py-4 rounded-xl font-bold text-sm"></div>

                        <button type="button" onclick="sendLiveEmbed('<%= guildId %>')" class="w-full py-4 bg-fuchsia-600 hover:bg-fuchsia-500 text-white font-black text-lg rounded-xl transition-all shadow-lg shadow-fuchsia-500/30 flex justify-center items-center">
                            <span class="mr-2 text-xl">๐</span> ุฅุฑุณุงู ุงูุฅููุจุฏ ุงูุขู!
                        </button>
                    </div>
                </div>

                ```

---

ุงูุฃุณุงุณ ุงุชุฑุณูุ ูุงูููุฏุฑ ุงูุฐูู ุจุชุงุนู ุดุบุงูุ ู**ุตุงูุน ุงูุฅููุจุฏ** ูุญุทูุท ูู ุตุฏุฑ ุงูุฏุงุดุจูุฑุฏ ุนุดุงู ุชุจุนุช ููุงูููู ูุฑุณุงููู ุจุฑุงุญุชู ูู ุบูุฑ ูุง ุชูุชุญ ุฏูุณููุฑุฏ!

*(ููุงุญุธุฉ: ููุฏ ุงูู JavaScript ุจุชุงุน ุฒุฑุงุฑ "ุฅุฑุณุงู ุงูุฅููุจุฏ ุงูุขู" ููุชุญุท ูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ูุน ุณูุฑูุจุช ุงูุฒุฑุงูุฑ ุงูุฏููุงููููุฉ).*

ุฑุฏ ุนููุง ุจู **"ูุงุช ุงูุฌุฒุก ุงูุชุงูู ูุง ูุญุด"** ุนุดุงู ุฃุจุนุชูู ุฃููู ูุณููู: (ูุธุงู ุงููุณุงุทุฉ ุงููุนุฒููุ ููุณู ุงูุจุงููุงุช ุงูุฏููุงููููุฉ ุงููู ููู ุงูุฒุฑุงูุฑ ุงูุญูุฑุง ูุงูุฎุถุฑุง ุจุฏู ุงูู JSON ุงููู ููุง ุนุงููููู)! ๐๐ฅ

<div id="section-middleman" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end border-b border-dark-700 pb-6">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ูุธุงู ุงููุณุงุทุฉ (ุงููุนุฒูู) โ๏ธ</h2>
                            <p class="text-slate-400">ุจุงูู ูููุตู ูุง ูุฑุณู ุชููููุงุช ููุฅุฏุงุฑุฉุ ููุนุชูุฏ ุนูู ุฃูุฑ <code class="bg-dark-700 px-2 py-1 rounded text-brand">done!</code> ูุชูููู ุงููุณูุท.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงููุธุงู</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="mm_enabled" id="mm_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.middlemanSystem.enabled ? 'checked' : '' %>>
                                <label for="mm_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-amber-500">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ ุฅุนุฏุงุฏุงุช ุงูุฑููุงุช ูุงูุฃูุณุงู</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุณู ุงูุชุฐุงูุฑ (Category)</label>
                                <select name="mm_categoryId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงููุณู ุงูุฐู ุณุชูุชุญ ููู ุงูุชุฐุงูุฑ --</option>
                                    <% categories.forEach(cat => { %>
                                        <option value="<%= cat.id %>" <%= config.middlemanSystem.categoryId === cat.id ? 'selected' : '' %>>๐ <%= cat.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูุจุงูู (Panel Channel)</label>
                                <select name="mm_panelChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงูุฑูู ุงูุชู ุณูุฑุณู ูููุง ุงูุจุงูู --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.middlemanSystem.panelChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-amber-400">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ผ๏ธ ุชุฎุตูุต ุงูุจุงูู ุงูุฎุงุฑุฌู (Outside Embed)</h3>
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู (Title)</label>
                                <input type="text" name="mm_panelTitle" value="<%= config.middlemanSystem.panelTitle || 'ุชุฐูุฑุฉ ูุณุงุทุฉ ุขููุฉ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold text-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงููุตู / ุงูููุงููู (Description) - ูุฏุนู ุงูุฒุฎุงุฑู</label>
                                <textarea name="mm_panelDescription" rows="4" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow resize-y"><%= config.middlemanSystem.panelDescription || 'ูุทูุจ ูุณูุท ูุนุชูุฏ ูู ุงูุฅุฏุงุฑุฉุ ูุฑุฌู ูุชุญ ุชุฐูุฑุฉ ูู ููุง.' %></textarea>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู</label>
                                    <div class="flex items-center space-x-3 space-x-reverse">
                                        <input type="color" id="mm_panel_color_picker" value="<%= config.middlemanSystem.panelColor || '#f2a658' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('mm_panelColor').value = this.value">
                                        <input type="text" id="mm_panelColor" name="mm_panelColor" value="<%= config.middlemanSystem.panelColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('mm_panel_color_picker').value = this.value">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฒุฑ (Button Label)</label>
                                    <input type="text" name="mm_buttonLabel" value="<%= config.middlemanSystem.buttonLabel || 'ุทูุจ ูุณูุท ๐ก๏ธ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-amber-300">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ ุงููุงูุฐุฉ ูุงูุฅููุจุฏ ุงูุฏุงุฎูู (Modal & Inside)</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงููุงูุฐุฉ ุงูููุจุซูุฉ (Modal Title)</label>
                                <input type="text" name="mm_modalTitle" value="<%= config.middlemanSystem.modalTitle || 'ุจูุงูุงุช ุงููุณุงุทุฉ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>

                            <div class="bg-dark-900/50 p-6 rounded-2xl border border-dark-700">
                                <h4 class="text-md font-bold text-brand-light mb-4">ุฃุณุฆูุฉ ุงููุงูุฐุฉ (Modal Questions)</h4>
                                <input type="hidden" name="mm_modalFieldsData" id="mm_modalFieldsData" value="<%= JSON.stringify(config.middlemanSystem.modalFields || []) %>">
                                
                                <div id="mm-fields-ui-container" class="space-y-4 mb-4">
                                    </div>
                                
                                <button type="button" onclick="addMmFieldUI()" class="w-full py-3 bg-emerald-600/20 hover:bg-emerald-600 text-emerald-400 hover:text-white font-bold rounded-xl border border-dashed border-emerald-500 transition-colors flex justify-center items-center">
                                    <span class="text-lg mr-2">โ</span> ุฅุถุงูุฉ ุณุคุงู ูููุงูุฐุฉ
                                </button>
                            </div>

                            <hr class="border-dark-700 my-6">

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงูุฅููุจุฏ ุฏุงุฎู ุงูุชุฐูุฑุฉ</label>
                                <input type="text" name="mm_insideTicketTitle" value="<%= config.middlemanSystem.insideTicketTitle || 'ุชุฐูุฑุฉ ุงููุณุงุทุฉ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุตู ุงูุฅููุจุฏ ุงูุฏุงุฎูู (ูุฏุนู ููุดู ุงูุนููู ุจู {user})</label>
                                <textarea name="mm_insideTicketDescription" rows="3" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow resize-y"><%= config.middlemanSystem.insideTicketDescription || 'ุฃููุงู ุจู {user}ุ ูุฑุฌู ุงูุชุธุงุฑ ุงููุณูุท ูุนุฏู ุงูุฅุฒุนุงุฌ.' %></textarea>
                            </div>
                            <div class="w-full md:w-1/2">
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุงูุฅููุจุฏ ุงูุฏุงุฎูู</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="mm_inside_color_picker" value="<%= config.middlemanSystem.insideTicketColor || '#f2a658' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('mm_insideTicketColor').value = this.value">
                                    <input type="text" id="mm_insideTicketColor" name="mm_insideTicketColor" value="<%= config.middlemanSystem.insideTicketColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('mm_inside_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-custom_panels" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุจุงููุงุช ุงููุชุนุฏุฏุฉ ๐ซ</h2>
                        <p class="text-slate-400">ุงุตูุน ุนุฏุฏ ูุง ููุงุฆู ูู ุจุงููุงุช ุงูุชุฐุงูุฑ (ุฏุนูุ ุดูุงููุ ุชูุฏููุงุช) ูุน ุชุญูู ูุงูู ุจุงูุฒุฑุงูุฑ ูุงูููุงูุฐ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-blue-500">
                        <input type="hidden" name="ticketPanelsData" id="ticketPanelsData" value="<%= JSON.stringify(config.ticketPanels || []) %>">
                        
                        <div id="dynamic-panels-container" class="space-y-8">
                            <div class="text-center py-10 bg-dark-900/50 rounded-2xl border border-dashed border-dark-700">
                                <span class="text-4xl mb-4 block animate-bounce">โณ</span>
                                <h3 class="text-xl font-bold text-white mb-2">ุฌุงุฑู ุชุญููู ูุญุฑู ุงูุจุงููุงุช...</h3>
                            </div>
                        </div>

                        <div class="mt-8 pt-6 border-t border-dark-700 flex justify-center">
                            <button type="button" onclick="addNewPanelUI()" class="flex items-center px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white font-black text-lg rounded-xl transition-all shadow-lg shadow-blue-600/30 transform hover:-translate-y-1">
                                <span class="text-2xl mr-2 ml-2">โ</span> ุฅุถุงูุฉ ุจุงูู ุชุฐุงูุฑ ุฌุฏูุฏ
                            </button>
                        </div>
                    </div>
                </div>

                <div id="section-ticket_controls" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุชุญูู ุงูุฐูู ูุงูุชุฑุงูุณูุฑูุจุช ๐๏ธ</h2>
                        <p class="text-slate-400">ุฑูู ุงูุชูุช ุงููุงุฏูุ ุฅุนุฏุงุฏุงุช ุงูุงุณุชูุงูุ ูุณุฌูุงุช ุงูุชุฐุงูุฑ ุงููุบููุฉ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-indigo-500">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div class="bg-dark-900/50 p-5 rounded-2xl border border-dark-700 relative overflow-hidden">
                                <div class="absolute top-0 right-0 bg-brand text-xs font-bold px-3 py-1 rounded-bl-xl">Counter ๐ข</div>
                                <label class="block text-sm font-bold text-white mb-3 mt-2">ุฑูู ุงูุชูุช ุงููุงุฏู (Ticket Counter)</label>
                                <input type="number" name="tc_ticketCounter" value="<%= config.ticketControls.ticketCounter || 1 %>" min="1"
                                    class="w-full bg-dark-800 border border-dark-600 rounded-xl py-3 px-4 text-brand-light input-glow font-mono text-2xl text-center font-black">
                                <p class="mt-2 text-xs text-amber-500 font-bold">ุงูุชุจ ููุง ุงูุฑูู ูุชููู ุงูุนุฏ ูู ุงูุจูุช ุงููุฏูู.</p>
                            </div>
                            
                            <div class="bg-dark-900/50 p-5 rounded-2xl border border-dark-700 relative overflow-hidden">
                                <div class="absolute top-0 right-0 bg-slate-600 text-xs font-bold px-3 py-1 rounded-bl-xl text-white">Limits ๐</div>
                                <label class="block text-sm font-bold text-white mb-3 mt-2">ุงูุญุฏ ุงูุฃูุตู ููุชุฐุงูุฑ ุงูููุชูุญุฉ ููู ุนุถู</label>
                                <input type="number" name="tc_maxOpenTicketsPerUser" value="<%= config.ticketControls.maxOpenTicketsPerUser || 1 %>" min="1" max="10"
                                    class="w-full bg-dark-800 border border-dark-600 rounded-xl py-3 px-4 text-white input-glow font-mono text-2xl text-center font-black">
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ ุณุฌูุงุช ุงูุชุฐุงูุฑ ูุงูุชุฑุงูุณูุฑูุจุช</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุญูุธ ุงูุชุฑุงูุณูุฑูุจุช (ุฑุณุงุฆู ุงูุชุฐูุฑุฉ)</label>
                                <select name="tc_transcriptChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชุฑุงูุณูุฑูุจุช --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ticketControls.transcriptChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ููุฌ ุงูุชุฐุงูุฑ (ูุชุญ ูุฅุบูุงู)</label>
                                <select name="tc_ticketLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูููุฌ --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ticketControls.ticketLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <div class="w-full md:w-1/2 mb-10">
                            <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุจุงูู ุชุญูู ุงูุชุฐูุฑุฉ (ุนูุฏ ุงูุฅุบูุงู/ุงูุงุณุชูุงู)</label>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <input type="color" id="tc_color_picker" value="<%= config.ticketControls.controlPanelColor || '#2b2d31' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('tc_controlPanelColor').value = this.value">
                                <input type="text" id="tc_controlPanelColor" name="tc_controlPanelColor" value="<%= config.ticketControls.controlPanelColor || '#2b2d31' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('tc_color_picker').value = this.value">
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ต๏ธ ุฅุนุฏุงุฏุงุช ุฒุฑ ุงูุงุณุชูุงู (Claim Settings)</h3>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700 hover:border-indigo-500/50 transition-colors">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ุฅุฎูุงุก ุงูุชุฐูุฑุฉ ุนูุฏ ุงูุงุณุชูุงู</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุฅุฎูุงุก ุงูุชูุช ุนู ุจุงูู ุทุงูู ุงูุฅุฏุงุฑุฉ ุจูุฌุฑุฏ ุถุบุท ุงูุฅุฏุงุฑู ุนูู (Claim).</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="tc_hideTicketOnClaim" id="tc_hideTicketOnClaim" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ticketControls.hideTicketOnClaim ? 'checked' : '' %>>
                                    <label for="tc_hideTicketOnClaim" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700 hover:border-indigo-500/50 transition-colors">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ููุน ุงูุฅุฏุงุฑููู ุงูุขุฎุฑูู ูู ุงููุชุงุจุฉ</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุฌุนู ุงูุชุฐูุฑุฉ ูููุฑุงุกุฉ ููุท (Read-Only) ูุจุงูู ุทุงูู ุงูุฅุฏุงุฑุฉ ุจุนุฏ ุงูุงุณุชูุงู.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="tc_readOnlyStaffOnClaim" id="tc_readOnlyStaffOnClaim" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ticketControls.readOnlyStaffOnClaim ? 'checked' : '' %>>
                                    <label for="tc_readOnlyStaffOnClaim" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                ```

ุงูุขู ุจูู ุนูุฏู ุญุงููุฉ ูุฃุณุฆูุฉ ุงููุณุงุทุฉ (ุนุดุงู ุชุชุฑุณู ุฒุฑุงูุฑ ุฒู ูุง ุทูุจุช)ุ ูุจุงูู ุฏููุงููููุ ูุฑูู ุงูุชูุช ุงููุงุฏู (Counter).

ุฑุฏ ุนููุง ุจู **"ูุงุช ุงูุฌุฒุก ุงูุชุงูุช ูุง ูุญุด"** ุนุดุงู ุฃุฏุฎู ุจูู ุนูู:
(ุงูุชููููุงุช ุงููุฒุฏูุฌุฉ ุงููู ุจุชุชุจุนุช ูู ุงูุฎุงุต ูุงูููุฌุ ูุงูุฑุชุจ ุงููุชุนุฏุฏุฉุ ูุชุฎุตูุต ุงูุฃูุงูุฑ ูุน ุฃูุฑ ุงูููุงููุฉ ุงูุนููุง)! ๐๐ฅ

<div id="section-ratings" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ูุธุงู ุงูุชููููุงุช (Ratings) โญ</h2>
                        <p class="text-slate-400">ูุตู ูุงูู ุจูู ุชูููู "ุงูุฏุนู ุงูููู" (ุนูุฏ ุฅุบูุงู ุงูุชุฐูุฑุฉ) ูุชูููู "ุงููุณุงุทุฉ" (ุนูุฏ ุงุณุชุฎุฏุงู ุฃูุฑ Done).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-yellow-500">
                        
                        <div class="bg-dark-900/50 p-6 rounded-2xl border border-dark-700 mb-8 relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-brand text-xs font-bold px-3 py-1 rounded-bl-xl text-white">ุงูุฏุนู ุงูููู ๐ก๏ธ</div>
                            <h3 class="text-xl font-bold text-brand-light mb-6 mt-2">ุฑูู ุชููููุงุช ุงูุฅุฏุงุฑุฉ (Staff Rating)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูููุฌ ูุชูููู ุงูุฅุฏุงุฑุฉ</label>
                                    <select name="rating_staffLogChannelId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชูููู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.ratings.staffLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                    <p class="mt-2 text-xs text-slate-500">ููุฑุณู ุชููุงุฆูุงู ุนูุฏ ุฅุบูุงู ุชุฐูุฑุฉ ุฏุนู ููู ุนุงุฏูุฉ.</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุชูููู ุงูุฅุฏุงุฑุฉ</label>
                                    <div class="flex items-center space-x-3 space-x-reverse">
                                        <input type="color" id="rating_staff_color_picker" value="<%= config.ratings.staffEmbedColor || '#3ba55d' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-800 border border-dark-600 p-1" onchange="document.getElementById('rating_staffEmbedColor').value = this.value">
                                        <input type="text" id="rating_staffEmbedColor" name="rating_staffEmbedColor" value="<%= config.ratings.staffEmbedColor || '#3ba55d' %>" class="flex-1 bg-dark-800 border border-dark-600 rounded-xl py-3.5 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('rating_staff_color_picker').value = this.value">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-dark-900/50 p-6 rounded-2xl border border-dark-700 mb-8 relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-amber-500 text-xs font-bold px-3 py-1 rounded-bl-xl text-dark-900">ุงููุณุงุทุฉ โ๏ธ</div>
                            <h3 class="text-xl font-bold text-amber-500 mb-6 mt-2">ุฑูู ุชููููุงุช ุงููุณุทุงุก (Mediator Rating)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูููุฌ ูุชูููู ุงููุณุทุงุก</label>
                                    <select name="rating_middlemanLogChannelId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชูููู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.ratings.middlemanLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                    <p class="mt-2 text-xs text-slate-500">ูุง ููุฑุณู ุฅูุง ุนูุฏ ุงุณุชุฎุฏุงู ุฃูุฑ <code>!done</code> ูู ุชุฐูุฑุฉ ุงููุณุงุทุฉ.</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุชูููู ุงููุณูุท</label>
                                    <div class="flex items-center space-x-3 space-x-reverse">
                                        <input type="color" id="rating_mm_color_picker" value="<%= config.ratings.middlemanEmbedColor || '#f2a658' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-800 border border-dark-600 p-1" onchange="document.getElementById('rating_middlemanEmbedColor').value = this.value">
                                        <input type="text" id="rating_middlemanEmbedColor" name="rating_middlemanEmbedColor" value="<%= config.ratings.middlemanEmbedColor || '#f2a658' %>" class="flex-1 bg-dark-800 border border-dark-600 rounded-xl py-3.5 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('rating_mm_color_picker').value = this.value">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-6 border-t border-dark-700 pt-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุชููููุงุช ุงูุฌุงูุฒุฉ (ุณุทุฑ ููู ุชูููู - ูุธูุฑ ููุนููู ูู ุงูุฎุงุต)</label>
                                <textarea name="rating_customReviewOptions" rows="4" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-4 px-5 text-white input-glow leading-relaxed resize-y"><%= (config.ratings.customReviewOptions && config.ratings.customReviewOptions.length > 0) ? config.ratings.customReviewOptions.join('\n') : 'ุชุนุงูู ุณุฑูุน ุฌุฏุงู ๐\nูุณูุท ูุถููู ููุญุชุฑู ๐\nุดูุฑุงู ุนูู ุณุฑุนุฉ ุงูุฑุฏ โค๏ธ' %></textarea>
                            </div>
                            
                            <div class="flex items-center justify-between p-5 bg-dark-900/30 rounded-2xl border border-dark-700">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ุงูุณูุงุญ ุจูุชุงุจุฉ ุชูููู ุญุฑ (Custom Text)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุฅุถุงูุฉ ุฎูุงุฑ "ุชูููู ุขุฎุฑ" ููููู ุงูุนููู ุจูุชุงุจุฉ ุฑุฃูู ุจููุณู.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="rating_allowCustomText" id="rating_allowCustomText" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ratings.allowCustomText ? 'checked' : '' %>>
                                    <label for="rating_allowCustomText" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div id="section-roles" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุฑุชุจ ูุงูุตูุงุญูุงุช ๐</h2>
                        <p class="text-slate-400">ุญุฏุฏ ุงูุฑุชุจ ุงููุณุคููุฉ ุนู ุงูุฏุนูุ ุงููุณุงุทุฉุ ูุฑุชุจ ุงูููุงููุฉ ุงูุนููุง. (ุงุถุบุท Ctrl ูุชุญุฏูุฏ ุฃูุซุฑ ูู ุฑุชุจุฉ ูู ุงูููุงุฆู ุงููุชุนุฏุฏุฉ).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-purple-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุชุจุฉ ุงูุฏุนู ุงูููู (Staff Role)</label>
                                <select name="role_adminRoleId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑุชุจุฉ ุงูุฏุนู --</option>
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= config.roles.adminRoleId === role.id ? 'selected' : '' %>>๐ก๏ธ <%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุชุจุฉ ุงููุณูุท ุงูุฃุณุงุณูุฉ (Middleman Role)</label>
                                <select name="role_middlemanRoleId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑุชุจุฉ ุงููุณูุท --</option>
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= config.roles.middlemanRoleId === role.id ? 'selected' : '' %>>โ๏ธ <%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">๐ ุงูุฑุชุจ ุงููุชุนุฏุฏุฉ (ุงูุฅุฏุงุฑุฉ ุงูุนููุง ูุงูุชุฑูุฏ)</h3>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-amber-400 mb-3">ุฑุชุจ ุงูุฅุฏุงุฑุฉ ุงูุนููุง (High Staff / Admin)</label>
                                <select name="role_highAdminRoles" multiple class="w-full h-32 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.roles.highAdminRoles && config.roles.highAdminRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                                <p class="text-xs text-slate-500 mt-2">ูุทููุจุฉ ููููุงููุฉ ุนูู ุฃูุฑ Approve.</p>
                            </div>
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-blue-400 mb-3">ุฑุชุจ ููุดู ุงูุชุฑูุฏ (Trade Pings)</label>
                                <select name="role_tradePingRoleIds" multiple class="w-full h-32 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.roles.tradePingRoleIds && config.roles.tradePingRoleIds.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                                <p class="text-xs text-slate-500 mt-2">ุงูุฑุชุจ ุงูุชู ุณูุชู ููุดูุชูุง ุนูุฏ ุทูุจ ูุณุงุทุฉ.</p>
                            </div>
                            <div class="bg-dark-900/50 p-4 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-emerald-400 mb-3">ุฑุชุจ ุงูููุงููุฉ ุนูู ุงูุชุฑูุฏ (Trade Approvers)</label>
                                <select name="role_tradeApproveRoleIds" multiple class="w-full h-32 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.roles.tradeApproveRoleIds && config.roles.tradeApproveRoleIds.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                                <p class="text-xs text-slate-500 mt-2">ูู ูุญู ูู ุถุบุท ุฒุฑ ูุจูู ุงูุชุฑูุฏ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-commands" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุชุฎุตูุต ุงูุฃูุงูุฑ โจ๏ธ</h2>
                        <p class="text-slate-400">ูู ุจุชุบููุฑ ุงุณู ุฃู ุฃูุฑุ ูุญุฏุฏ ุงูุฑุชุจ ุงููุณููุญ ููุง ุจุงุณุชุฎุฏุงูู.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-cyan-500 space-y-6">
                        
                        <div class="p-6 bg-amber-900/10 rounded-2xl border border-amber-500/30 mb-8">
                            <h3 class="text-xl font-bold text-amber-500 mb-6 flex items-center">โ๏ธ ุฃูุงูุฑ ุงููุณุงุทุฉ ูุงูุฅุฏุงุฑุฉ ุงูุนููุง</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฃูุฑ ุฅุถุงูุฉ ุชูุงุตูู ุงูุชุฑูุฏ</label>
                                    <input type="text" name="cmd_tradeCmd" value="<%= config.commands.tradeCmd || 'trade' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-2">
                                    <select name="cmd_tradeAllowedRoles" multiple class="w-full h-20 bg-dark-800 border border-dark-700 rounded-xl py-1 px-2 text-xs text-white input-glow custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.tradeAllowedRoles && config.commands.tradeAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฃูุฑ ุฅููุงุก ุงูุชูุช ูุชูููู ุงููุณูุท</label>
                                    <input type="text" name="cmd_doneCmd" value="<%= config.commands.doneCmd || 'done' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-2">
                                    <select name="cmd_doneAllowedRoles" multiple class="w-full h-20 bg-dark-800 border border-dark-700 rounded-xl py-1 px-2 text-xs text-white input-glow custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.doneAllowedRoles && config.commands.doneAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฃูุฑ ุทูุจ ููุงููุฉ ุงูุฅุฏุงุฑุฉ ุงูุนููุง</label>
                                    <input type="text" name="cmd_approveCmd" value="<%= config.commands.approveCmd || 'approve' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-2">
                                    <select name="cmd_approveAllowedRoles" multiple class="w-full h-20 bg-dark-800 border border-dark-700 rounded-xl py-1 px-2 text-xs text-white input-glow custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.approveAllowedRoles && config.commands.approveAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-white mb-2 flex items-center">๐ข ุฃูุฑ ุณุญุจ ุงูุฅุฏุงุฑุฉ (Come)</label>
                                <input type="text" name="cmd_comeCmd" value="<%= config.commands.comeCmd || 'come' %>" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-3">
                                <label class="block text-xs font-bold text-slate-400 mb-1">ุงูุฑุชุจ ุงููุณููุญ ููุง:</label>
                                <select name="cmd_comeAllowedRoles" multiple class="w-full h-24 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-sm text-white input-glow custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.commands.comeAllowedRoles && config.commands.comeAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            
                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-white mb-2 flex items-center">๐งน ุฃูุฑ ูุณุญ ุงูุฑุณุงุฆู (Clear)</label>
                                <input type="text" name="cmd_clearCmd" value="<%= config.commands.clearCmd || 'clear' %>" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-3">
                                <label class="block text-xs font-bold text-slate-400 mb-1">ุงูุฑุชุจ ุงููุณููุญ ููุง:</label>
                                <select name="cmd_clearAllowedRoles" multiple class="w-full h-24 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-sm text-white input-glow custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.commands.clearAllowedRoles && config.commands.clearAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>

                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-white mb-2 flex items-center">โณ ุฃูุฑ ุงูุฅุณูุงุช (Timeout)</label>
                                <input type="text" name="cmd_timeoutCmd" value="<%= config.commands.timeoutCmd || 'timeout' %>" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-3">
                                <label class="block text-xs font-bold text-slate-400 mb-1">ุงูุฑุชุจ ุงููุณููุญ ููุง:</label>
                                <select name="cmd_timeoutAllowedRoles" multiple class="w-full h-24 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-sm text-white input-glow custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.commands.timeoutAllowedRoles && config.commands.timeoutAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>

                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700">
                                <label class="block text-sm font-bold text-white mb-2 flex items-center">๐จ ุฃูุฑ ุงูุญุธุฑ (Ban)</label>
                                <input type="text" name="cmd_banCmd" value="<%= config.commands.banCmd || 'ban' %>" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-4 text-white input-glow font-mono font-bold mb-3">
                                <label class="block text-xs font-bold text-slate-400 mb-1">ุงูุฑุชุจ ุงููุณููุญ ููุง:</label>
                                <select name="cmd_banAllowedRoles" multiple class="w-full h-24 bg-dark-800 border border-dark-600 rounded-xl py-2 px-3 text-sm text-white input-glow custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.commands.banAllowedRoles && config.commands.banAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                    </div>
                </div>

                ```

ุงูุฃุณุฏ ุฏุฎู ูู ุงูุนุธู! ๐ฅ
ุฅุญูุง ูุฏู ุจุฑูุฌูุง ูุณู ุงูุฑุชุจ ูุงูุชููููุงุชุ ููู ุฃูุฑ ูู ุงูุฃูุงูุฑ ุจูู ุจูุณุญุจ ุงูู Roles ุจุชุงุนุชู ูู ูุงุฆูุฉ ูุชุนุฏุฏุฉ (ุงุถุบุท Ctrl ูุงุฎุชุงุฑ ุฒู ูุง ุฅูุช ุนุงูุฒ). 

**ุงููุญุทุฉ ุงูุฌุงูุฉ ูุงูุฃุฎุทุฑ (ุงูุฌุฒุก ุงูุฑุงุจุน):**
ูุณู "ุงูููุฌุงุช ุงููุฑุนุจุฉ" (ุญุฐู ุตูุฑุ ุชุนุฏูู ุฑุณุงุฆูุ ุฅุนุทุงุก ุฑุชุจ)ุ ููุณู ุงูุชุญุฐูุฑุงุช ุงููุฒุฏูุฌ ูุงูููุงููู (ุนุฑุจู/ุฅูุฌููุฒู)ุ ููุณู ุงูุญูุงูุฉ ูุงูุชุฑุญูุจ!

ุฑุฏ ุนููุง ุจู **"ูุงุช ุงูุฌุฒุก ุงูุฑุงุจุน ูุง ุจุทู"** ุนุดุงู ูููู ุงูุฅูุจุฑุงุทูุฑูุฉ! ๐๐ฅ

<div id="section-logs" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุณุฌูุงุช ุงูุณูุฑูุฑ ุงูุฏูููุฉ ๐</h2>
                        <p class="text-slate-400">ูุฑุงูุจุฉ ุดุงููุฉ ููู ูุง ูุญุฏุซ ูู ุงูุณูุฑูุฑ ุจุชูุตูู ุฏููู ุฌุฏุงู (ููุง ูู ุงููุธุงู ุงููุฏูู).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-teal-500 space-y-8">
                        
                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center">๐ฌ ุณุฌูุงุช ุงูุฑุณุงุฆู ูุงูุตูุฑ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุญุฐู ุงูุฑุณุงุฆู</label>
                                    <select name="log_messageDeleteLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.messageDeleteLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุชุนุฏูู ุงูุฑุณุงุฆู</label>
                                    <select name="log_messageEditLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.messageEditLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุญุฐู ุงูุตูุฑ ููุท</label>
                                    <select name="log_imageDeleteLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm border-l-2 border-l-amber-500">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.imageDeleteLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center">๐ฅ ุณุฌูุงุช ุงูุฃุนุถุงุก ูุงูุฑุชุจ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุฅุนุทุงุก/ุณุญุจ ุงูุฑุชุจ (ููุนุถู)</label>
                                    <select name="log_roleGiveTakeLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.roleGiveTakeLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุฅูุดุงุก/ุญุฐู ุงูุฑุชุจ (ูู ุงูุณูุฑูุฑ)</label>
                                    <select name="log_roleCreateDeleteLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.roleCreateDeleteLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุฏุฎูู/ุฎุฑูุฌ ุงูุฃุนุถุงุก</label>
                                    <select name="log_memberJoinLeaveLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.memberJoinLeaveLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุบุฑู ุงูุตูุช (Voice)</label>
                                    <select name="log_voiceStateLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.voiceStateLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-red-900/10 rounded-2xl border border-red-500/20">
                            <h3 class="text-xl font-bold text-red-400 mb-5 flex items-center">๐จ ุณุฌูุงุช ุงูุนููุจุงุช ูุงูุฃูุธูุฉ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ููุฌ ุงูุญุธุฑ ูุงูุทุฑุฏ (Ban & Kick)</label>
                                    <select name="log_banKickLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.banKickLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฑูู ุงูููุฌ ููุชุญุฐูุฑุงุช</label>
                                    <select name="log_warningsLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm border-l-2 border-l-orange-500">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.warningsLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฑูู ุงูุงูุชุฑุงุญุงุช (Suggestions)</label>
                                    <select name="log_suggestionsLogId" class="w-full bg-dark-800 border border-dark-600 rounded-xl py-2.5 px-3 text-white input-glow text-sm border-l-2 border-l-blue-500">
                                        <option value="">-- ูุนุทู --</option>
                                        <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.serverLogs.suggestionsLogId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div id="section-warnings" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ูุธุงู ุงูุชุญุฐูุฑุงุช ูุงูููุงููู โ๏ธ</h2>
                        <p class="text-slate-400">ุชุฎุตูุต ุงูุฃุณุจุงุจ ูุงูููุงููู ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ ููุฅุฑุณุงู ุงูุชููุงุฆู ูุน ุงูุชุญุฐูุฑ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-orange-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุญุฏ ุงูุฃูุตู ููุชุญุฐูุฑุงุช (Max Warnings)</label>
                                <input type="number" name="warn_maxWarnings" value="<%= config.warnings.maxWarnings || 3 %>" min="1"
                                    class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono text-center font-bold text-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุนููุจุฉ ุงูุชููุงุฆูุฉ (Auto Action)</label>
                                <select name="warn_autoAction" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-bold">
                                    <option value="timeout" <%= config.warnings.autoAction === 'timeout' ? 'selected' : '' %>>โณ ุฅุณูุงุช (Timeout)</option>
                                    <option value="kick" <%= config.warnings.autoAction === 'kick' ? 'selected' : '' %>>๐ข ุทุฑุฏ (Kick)</option>
                                    <option value="ban" <%= config.warnings.autoAction === 'ban' ? 'selected' : '' %>>๐จ ุญุธุฑ (Ban)</option>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-xl font-bold text-white mb-6">๐ ุงูุฃุณุจุงุจ ูุงูููุงููู ุงููุฒุฏูุฌุฉ</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700">
                                <h4 class="text-brand-light font-bold mb-4 text-center">ุงููุณู ุงูุนุฑุจู ๐ธ๐ฆ</h4>
                                <label class="block text-xs font-bold text-slate-400 mb-2">ุฃุณุจุงุจ ุงูุชุญุฐูุฑ (ุณุทุฑ ููู ุณุจุจ)</label>
                                <textarea name="warn_presetReasonsAr" rows="4" class="w-full bg-dark-800 border border-dark-600 rounded-lg py-3 px-3 text-white input-glow resize-y mb-4"><%= (config.warnings.presetReasonsAr && config.warnings.presetReasonsAr.length > 0) ? config.warnings.presetReasonsAr.join('\n') : 'ุณุจ ูุดุชู\nูุดุฑ ุฑูุงุจุท\nุฅุฒุนุงุฌ ุงูุฅุฏุงุฑุฉ' %></textarea>
                                
                                <label class="block text-xs font-bold text-slate-400 mb-2">ูุต ุงูููุงููู (ููุฑุณู ููุนุถู ุงููุฎุงูู)</label>
                                <textarea name="warn_serverRulesAr" rows="4" class="w-full bg-dark-800 border border-dark-600 rounded-lg py-3 px-3 text-white input-glow resize-y"><%= config.warnings.serverRulesAr || 'ุงูุฑุฌุงุก ุงูุงูุชุฒุงู ุจููุงููู ุงูุณูุฑูุฑ ูุนุฏู ุงููุฎุงููุฉ.' %></textarea>
                            </div>

                            <div class="bg-dark-900/50 p-5 rounded-xl border border-dark-700" dir="ltr">
                                <h4 class="text-brand-light font-bold mb-4 text-center">English Section ๐บ๐ธ</h4>
                                <label class="block text-xs font-bold text-slate-400 mb-2 text-left">Warning Reasons (One per line)</label>
                                <textarea name="warn_presetReasonsEn" rows="4" class="w-full bg-dark-800 border border-dark-600 rounded-lg py-3 px-3 text-white input-glow resize-y mb-4 text-left" dir="ltr"><%= (config.warnings.presetReasonsEn && config.warnings.presetReasonsEn.length > 0) ? config.warnings.presetReasonsEn.join('\n') : 'Swearing\nPosting Links\nSpam' %></textarea>
                                
                                <label class="block text-xs font-bold text-slate-400 mb-2 text-left">Server Rules (Sent to violator)</label>
                                <textarea name="warn_serverRulesEn" rows="4" class="w-full bg-dark-800 border border-dark-600 rounded-lg py-3 px-3 text-white input-glow resize-y text-left" dir="ltr"><%= config.warnings.serverRulesEn || 'Please follow the server rules and avoid breaking them.' %></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-welcome" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุชุฑุญูุจ ุงููููู ๐</h2>
                            <p class="text-slate-400">ุชุฎุตูุต ุฑุณุงูุฉ ุงูุชุฑุญูุจุ ุฎูููุฉ ุงูุตูุฑุฉุ ูููู ุงูุฅุทุงุฑ.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงูุชุฑุญูุจ</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="wel_enabled" id="wel_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.welcomeSystem.enabled ? 'checked' : '' %>>
                                <label for="wel_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-pink-500 space-y-6">
                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูุชุฑุญูุจ (Welcome Channel)</label>
                            <select name="wel_channelId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชุฑุญูุจ --</option>
                                <% textChannels.forEach(ch => { %>
                                    <option value="<%= ch.id %>" <%= config.welcomeSystem.channelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                <% }) %>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุณุงูุฉ ุงูุชุฑุญูุจ (ุงููุชุบูุฑุงุช: {user}, {server}, {memberCount})</label>
                            <textarea name="wel_messageText" rows="3" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-4 px-5 text-white input-glow resize-y"><%= config.welcomeSystem.messageText || 'ูุฑุญุจุงู ุจู {user} ูู ุณูุฑูุฑ {server}. ุฃูุช ุงูุนุถู ุฑูู {memberCount}!' %></textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 pt-4">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุตูุฑุฉ ุงูุฎูููุฉ (Background URL)</label>
                                <input type="text" name="wel_backgroundUrl" value="<%= config.welcomeSystem.backgroundUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono text-left text-sm" dir="ltr" placeholder="https://...">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅุทุงุฑ ุงูุตูุฑุฉ (Avatar Border Hex)</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="wel_border_picker" value="<%= config.welcomeSystem.avatarBorderHex || '#ffffff' %>" class="h-12 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('wel_avatarBorderHex').value = this.value">
                                    <input type="text" id="wel_avatarBorderHex" name="wel_avatarBorderHex" value="<%= config.welcomeSystem.avatarBorderHex || '#ffffff' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono uppercase text-center" oninput="document.getElementById('wel_border_picker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-protection" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ูุธุงู ุงูุญูุงูุฉ ูุงูุฃูุงู ๐ก๏ธ</h2>
                        <p class="text-slate-400">ุญูุงูุฉ ูู ุงูุฑูุงุจุทุ ุงูุณุจุงูุ ูุชุฎุฑูุจ ุงูุณูุฑูุฑ (Anti-Nuke).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-red-600 space-y-6">
                        
                        <div class="flex items-center justify-between bg-dark-900/50 p-5 rounded-2xl border border-dark-700">
                            <div>
                                <h3 class="text-lg font-bold text-white flex items-center">๐ ููุน ุงูุฑูุงุจุท (Anti-Links)</h3>
                                <p class="text-sm text-slate-400 mt-1">ุญุฐู ุฃู ุฑุงุจุท ููุฑุณู ูู ุงูุณูุฑูุฑ ุชููุงุฆูุงู.</p>
                            </div>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="prot_antiLinkEnabled" id="prot_antiLinkEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiLinkEnabled ? 'checked' : '' %>>
                                <label for="prot_antiLinkEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-bold text-slate-300 mb-2">ุงูุฑุชุจ ุงููุณุชุซูุงุฉ ูู ููุน ุงูุฑูุงุจุท (Allowed Roles)</label>
                            <select name="prot_antiLinkAllowedRoles" multiple class="w-full h-20 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-sm text-white input-glow custom-scrollbar">
                                <% serverRoles.forEach(role => { %>
                                    <option value="<%= role.id %>" <%= (config.protection.antiLinkAllowedRoles && config.protection.antiLinkAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                <% }) %>
                            </select>
                        </div>

                        <div class="flex items-center justify-between bg-dark-900/50 p-5 rounded-2xl border border-dark-700 mt-6">
                            <div>
                                <h3 class="text-lg font-bold text-white flex items-center">๐ ููุน ุงูุณุจุงู ูุงูุชูุฑุงุฑ (Anti-Spam)</h3>
                            </div>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="prot_antiSpamEnabled" id="prot_antiSpamEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiSpamEnabled ? 'checked' : '' %>>
                                <label for="prot_antiSpamEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-bold text-slate-300 mb-2">ุงูุนููุจุฉ ุงูุชููุงุฆูุฉ ููุณุจุงู</label>
                            <select name="prot_antiSpamAction" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow cursor-pointer font-bold">
                                <option value="mute" <%= config.protection.antiSpamAction === 'mute' ? 'selected' : '' %>>ุฅุณูุงุช (Timeout)</option>
                                <option value="warn" <%= config.protection.antiSpamAction === 'warn' ? 'selected' : '' %>>ุชุญุฐูุฑ (Warn)</option>
                                <option value="delete" <%= config.protection.antiSpamAction === 'delete' ? 'selected' : '' %>>ุญุฐู ุงูุฑุณุงุฆู ููุท</option>
                            </select>
                        </div>

                        <div class="bg-red-900/10 p-6 rounded-2xl border border-red-500/30 mt-6">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h3 class="text-lg font-bold text-red-400 flex items-center">โข๏ธ ููุงูุญุฉ ุชุฎุฑูุจ ุงูุณูุฑูุฑ (Anti-Nuke)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ููุน ุงูุฅุฏุงุฑููู ูู ุญุฐู ุงูุฑููุงุช ุฃู ุงูุจุงูุฏ ุงูุฌูุงุนู ุงูุนุดูุงุฆู.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="prot_antiNukeEnabled" id="prot_antiNukeEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiNukeEnabled ? 'checked' : '' %>>
                                    <label for="prot_antiNukeEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฃูุตู ุญุฐู ููุฑููุงุช/ุฏูููุฉ</label>
                                    <input type="number" name="prot_maxChannelDeletesPerMinute" value="<%= config.protection.maxChannelDeletesPerMinute || 3 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2 px-4 text-white input-glow text-center font-bold">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-2">ุฃูุตู ุจุงูุฏ/ุฏูููุฉ</label>
                                    <input type="number" name="prot_maxBanPerMinute" value="<%= config.protection.maxBanPerMinute || 3 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2 px-4 text-white input-glow text-center font-bold">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                ```

ุงูููุนุฉ ุงุชุญุตูุช! ๐ก๏ธ ุงูุณุฌูุงุช ุจูุช ูุฑุนุจุฉ ุจุชูุงุตูููุงุ ูุงูููุงููู ุงููุฒุฏูุฌุฉ ุจูุช ููุฌูุฏุฉุ ูุงูุชุฑุญูุจ ุจู "ููู ุฅุทุงุฑ ุงูุตูุฑุฉ" ุงุชุนูู ุจุงููููู ุฒู ุตูุฑุชู.

**ูุฏู ุฅุญูุง ุฌุงูุฒูู ููุญุธุฉ ุงูุชุงุฑูุฎูุฉ: ุงูุฌุฒุก ุงูุฎุงูุณ ูุงูุฃุฎูุฑ!**
ุงูุฌุฒุก ุฏู ููู: 
1. ุงูุฑุชุจ ูุงูุฑุฏ ุงูุชููุงุฆู (ูุฎููู ุฒุฑุงูุฑ ุฅุถุงูุฉ/ุญุฐู ุจุฏู JSON).
2. ุงููููุงุช (ุจุฑุถู ุฒุฑุงูุฑ ุฅุถุงูุฉ/ุญุฐู ุจุฏู JSON).
3. ููุงุฌุฃุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI).
4. ุฒุฑุงุฑ ุงูุญูุธ ุงููุจูุฑ.
5. **๐ช ูุญุฑู ุงูุฌุงูุงุณูุฑูุจุช ุงูุณุญุฑู** (ุงูู Script ุงููู ุจูุดุบู ูู ุฒุฑุงูุฑ ุงูุฅุถุงูุฉ ูุงูุญุฐู ููุจุงููุงุชุ ููุฃุณุฆูุฉุ ููุตุงูุน ุงูุฅููุจุฏ ุงูููุฑู)!

ุฑุฏ ุนููุง ุจู **"ูุงุช ุฎุชุงู ุงูุฅูุจุฑุงุทูุฑูุฉ ูุง ูุญุด"** ุนุดุงู ุฃุฑุณูู ุงููุทุนุฉ ุงูุฃุฎูุฑุฉ ููููู ุงูููู ุงูุฃุนุธู ูู ุงูุณุงุญุฉ! ๐๐ฅ

<div id="section-auto_roles" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6">
                        <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุฑุชุจ ูุงูุฑุฏ ุงูุชููุงุฆู ๐ค</h2>
                        <p class="text-slate-400">ุฅุนุทุงุก ุฑุชุจ ุชููุงุฆูุฉ ููุฃุนุถุงุก ุงูุฌุฏุฏุ ูุฑุฏูุฏ ุงูุจูุช ุงูุฐููุฉ ุนูู ูููุงุช ูุนููุฉ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-fuchsia-500 space-y-8">
                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3 flex items-center">๐๏ธ ุงูุฑุชุจ ุงูุชููุงุฆูุฉ (Auto-Roles)</label>
                            <select name="autoRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                <% serverRoles.forEach(role => { %>
                                    <option value="<%= role.id %>" <%= (config.autoRoles && config.autoRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                <% }) %>
                            </select>
                            <p class="mt-2 text-xs text-slate-500">ุณูุชู ุฅุนุทุงุคูุง ููุนุถู ุจูุฌุฑุฏ ุฏุฎููู ุงูุณูุฑูุฑ (ุงุถุบุท Ctrl ูุชุญุฏูุฏ ุฃูุซุฑ ูู ุฑุชุจุฉ).</p>
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div>
                            <div class="flex justify-between items-center mb-4">
                                <label class="block text-sm font-bold text-brand-light flex items-center">๐ฌ ุงูุฑุฏูุฏ ุงูุชููุงุฆูุฉ (Auto-Responders)</label>
                                <button type="button" onclick="addAutoResponderUI()" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-bold rounded-lg transition-colors">โ ุฅุถุงูุฉ ุฑุฏ ุชููุงุฆู</button>
                            </div>
                            
                            <input type="hidden" name="autoRespondersData" id="autoRespondersData" value="<%= JSON.stringify(config.autoResponders || []) %>">
                            <div id="auto-responders-container" class="space-y-4">
                                </div>
                        </div>
                    </div>
                </div>

                <div id="section-leveling" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-2 tracking-tight">ุงูุงูุชุตุงุฏ ูุงููููุงุช ๐๐ฐ</h2>
                            <p class="text-slate-400">ุชุญูู ูู ุฃููุงู ุงูุณูุฑูุฑ ูููุงุท ุงูุฎุจุฑุฉ ูููุงูุขุช ุงููุณุชููุงุช.</p>
                        </div>
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div class="flex items-center bg-dark-800 p-2 rounded-xl border border-dark-700">
                                <span class="mr-2 ml-2 text-xs font-bold text-white">ุงูุงูุชุตุงุฏ</span>
                                <div class="relative inline-block w-10 align-middle select-none">
                                    <input type="checkbox" name="eco_enabled" id="eco_enabled" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.economy.enabled !== false ? 'checked' : '' %>>
                                    <label for="eco_enabled" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-600 cursor-pointer" style="width: 2.5rem;"></label>
                                </div>
                            </div>
                            <div class="flex items-center bg-dark-800 p-2 rounded-xl border border-dark-700">
                                <span class="mr-2 ml-2 text-xs font-bold text-white">ุงููููุงุช</span>
                                <div class="relative inline-block w-10 align-middle select-none">
                                    <input type="checkbox" name="lvl_enabled" id="lvl_enabled" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.leveling.enabled !== false ? 'checked' : '' %>>
                                    <label for="lvl_enabled" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-600 cursor-pointer" style="width: 2.5rem;"></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-yellow-400">
                        <h3 class="text-xl font-bold text-white mb-6">๐ฐ ุฅุนุฏุงุฏุงุช ุงูุงูุชุตุงุฏ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="text-xs font-bold text-slate-300 mb-2 block">ุงูุฑุงุชุจ ุงููููู (ุงูุญุฏ ุงูุฃุฏูู)</label>
                                <input type="number" name="eco_dailyMin" value="<%= config.economy.dailyMin || 1000 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2 px-4 text-white input-glow font-mono font-bold text-center">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-300 mb-2 block">ุงูุฑุงุชุจ ุงููููู (ุงูุญุฏ ุงูุฃูุตู)</label>
                                <input type="number" name="eco_dailyMax" value="<%= config.economy.dailyMax || 5000 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2 px-4 text-white input-glow font-mono font-bold text-center">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-300 mb-2 block">ุถุฑูุจุฉ ุงูุชุญููู (%)</label>
                                <input type="number" name="eco_tax" value="<%= config.economy.tax || 5 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-2 px-4 text-red-400 input-glow font-mono font-bold text-center">
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-blue-400">
                        <h3 class="text-xl font-bold text-white mb-6">๐ ุฅุนุฏุงุฏุงุช ุงููุณุชููุงุช ูุงูุฌูุงุฆุฒ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ุฑูู ุฅุดุนุงุฑุงุช ุงูุชูููู</label>
                                <select name="lvl_levelUpChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ููุณ ุงูุฑูู ุงูุชู ููุชุจ ูููุง --</option>
                                    <% textChannels.forEach(ch => { %> <option value="<%= ch.id %>" <%= config.leveling.levelUpChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option> <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ุฑุณุงูุฉ ุงูุชูููู (ุงููุชุบูุฑุงุช: {user}, {level})</label>
                                <input type="text" name="lvl_levelUpMessage" value="<%= config.leveling.levelUpMessage || 'ูุจุฑูู {user}! ูุตูุช ููู **{level}** ๐' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div class="flex justify-between items-center mb-4">
                            <label class="block text-sm font-bold text-brand-light">๐ ุฌูุงุฆุฒ ุงูุฑุชุจ ุนูุฏ ุงููุตูู ููุณุชูู ูุนูู</label>
                            <button type="button" onclick="addLevelRewardUI()" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-colors">โ ุฅุถุงูุฉ ุฌุงุฆุฒุฉ ุฌุฏูุฏุฉ</button>
                        </div>
                        <input type="hidden" name="lvl_roleRewardsData" id="lvl_roleRewardsData" value="<%= JSON.stringify(config.leveling.roleRewards || []) %>">
                        <div id="level-rewards-container" class="space-y-4">
                            </div>
                    </div>
                </div>

                <div id="section-ai_system" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 border-b border-dark-700 pb-6 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-500 mb-2 tracking-tight">ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI) โจ</h2>
                            <p class="text-slate-400">ุญูู ุณูุฑูุฑู ูููุงู ุฐูู ูุชูุงุนู ููู ุงูุจูุช ูุน ุงูุฃุนุถุงุก ูุฃูู ุฅูุณุงู.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-amber-500/30 shadow-lg shadow-amber-500/10">
                            <span class="mr-4 ml-2 font-bold text-amber-400">ุชูุนูู ุงูู AI</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="ai_enabled" id="ai_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.aiSystem.enabled !== false ? 'checked' : '' %>>
                                <label for="ai_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-8 mb-8 border-t-4 border-t-amber-500 shadow-[0_0_40px_rgba(245,158,11,0.1)]">
                        <div class="grid grid-cols-1 gap-8 mb-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3 flex items-center">๐ค ุฑูู ุงูุฏุฑุฏุดุฉ ุงูุฐููุฉ (Chat Channel)</label>
                                <select name="ai_chatChannelId" class="w-full bg-dark-900 border border-amber-500/30 rounded-xl py-3.5 px-4 text-amber-50 input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงูุฑูู ููุชุญุฏุซ ูููุง ุงูุฃุนุถุงุก ูุน ุงูุจูุช --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.aiSystem.chatChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                                <p class="text-xs text-slate-400 mt-2">ุฃู ุฑุณุงูุฉ ูู ูุฐู ุงูุฑูู ุณูููู ุงูุจูุช ุจุงูุฑุฏ ุนูููุง ุขููุงู ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.</p>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700 hover:border-amber-500/50 transition-colors">
                            <div>
                                <h3 class="text-lg font-bold text-white flex items-center">๐ก๏ธ ุงูุญูุงูุฉ ุงูุฐููุฉ (AI Auto-Mod)</h3>
                                <p class="text-sm text-slate-400 mt-1">ูุฌุนู ุงูุจูุช ูููู ุณูุงู ุงูุฑุณุงุฆู ููุนุงูุจ ุนูู ุงูุดุชุงุฆู ุงููุจุทูุฉ ูุงูุฅูุงูุงุช ุจุฏูู ุงูุญุงุฌุฉ ููุงุฆูุฉ ูููุงุช.</p>
                            </div>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="ai_autoModToxicity" id="ai_autoModToxicity" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.aiSystem.autoModToxicity ? 'checked' : '' %>>
                                <label for="ai_autoModToxicity" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sticky bottom-0 bg-gradient-to-t from-dark-900 via-dark-900 to-transparent pt-12 pb-8 flex justify-end z-50">
                    <button type="submit" onclick="syncAllDataBeforeSave()" class="flex items-center px-10 py-5 bg-brand hover:bg-brand-light text-white text-xl font-black rounded-2xl shadow-[0_0_40px_rgba(88,101,242,0.5)] transition-all duration-300 transform hover:-translate-y-2 hover:scale-105 border border-white/20">
                        <span class="mr-3 ml-2 text-2xl">๐พ</span> ุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
                    </button>
                </div>

            </form>
        </div>
    </main>

    <script>
        // 1. ูุธุงู ุงูุชููู
        function switchSection(targetSectionId) {
            document.querySelectorAll('.settings-section').forEach(section => section.classList.remove('active'));
            const target = document.getElementById('section-' + targetSectionId);
            if (target) target.classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-brand', 'text-white', 'shadow-lg', 'shadow-brand/20', 'active-nav');
                btn.classList.add('text-slate-400', 'hover:bg-dark-700', 'hover:text-white');
            });

            const activeBtn = document.querySelector(`.nav-btn[data-target="${targetSectionId}"]`);
            if (activeBtn) {
                activeBtn.classList.remove('text-slate-400', 'hover:bg-dark-700', 'hover:text-white');
                activeBtn.classList.add('bg-brand', 'text-white', 'shadow-lg', 'shadow-brand/20', 'active-nav');
            }
            document.getElementById('main-scroll-area').scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 2. ุฅุฑุณุงู ุงูุฅููุจุฏ ุงูููุฑู
        async function sendLiveEmbed(guildId) {
            const channelId = document.getElementById('live_embed_channel').value;
            const title = document.getElementById('live_embed_title').value;
            const desc = document.getElementById('live_embed_desc').value;
            const color = document.getElementById('live_embed_color').value;
            const image = document.getElementById('live_embed_image').value;
            const statusDiv = document.getElementById('live_embed_status');

            if (!channelId || (!title && !desc)) {
                statusDiv.className = 'mb-6 px-5 py-4 rounded-xl font-bold text-sm bg-red-500/20 text-red-400 border border-red-500';
                statusDiv.innerText = 'โ ูุฌุจ ุงุฎุชูุงุฑ ุงูุฑูู ููุชุงุจุฉ ุนููุงู ุฃู ูุตู ุนูู ุงูุฃูู.';
                statusDiv.classList.remove('hidden');
                return;
            }

            statusDiv.className = 'mb-6 px-5 py-4 rounded-xl font-bold text-sm bg-blue-500/20 text-blue-400 border border-blue-500';
            statusDiv.innerText = 'โณ ุฌุงุฑู ุงูุฅุฑุณุงู...';
            statusDiv.classList.remove('hidden');

            try {
                const response = await fetch(`/api/send-embed/${guildId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ channelId, title, description: desc, color, imageUrl: image })
                });
                const result = await response.json();
                
                if (result.success) {
                    statusDiv.className = 'mb-6 px-5 py-4 rounded-xl font-bold text-sm bg-emerald-500/20 text-emerald-400 border border-emerald-500';
                    statusDiv.innerText = 'โ ุชู ุฅุฑุณุงู ุงูุฅููุจุฏ ุจูุฌุงุญ!';
                    document.getElementById('live_embed_title').value = '';
                    document.getElementById('live_embed_desc').value = '';
                } else {
                    statusDiv.className = 'mb-6 px-5 py-4 rounded-xl font-bold text-sm bg-red-500/20 text-red-400 border border-red-500';
                    statusDiv.innerText = result.error || 'โ ูุดู ุงูุฅุฑุณุงู.';
                }
            } catch (e) {
                statusDiv.className = 'mb-6 px-5 py-4 rounded-xl font-bold text-sm bg-red-500/20 text-red-400 border border-red-500';
                statusDiv.innerText = 'โ ุญุฏุซ ุฎุทุฃ ูู ุงูุฎุงุฏู.';
            }
        }

        // =====================================================================
        // ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ ููุจูุงูุงุช (ุชุญููู ุงูู JSON ุฅูู ูุงุฌูุฉ ูุฑุฆูุฉ)
        // =====================================================================
        const serverRolesList = <%- JSON.stringify(serverRoles) %>;
        const rolesOptionsHTML = serverRolesList.map(r => `<option value="${r.id}">${r.name}</option>`).join('');
        const textChannelsHTML = `<%- textChannels.map(ch => `<option value="${ch.id}">๐ฌ ${ch.name}</option>`).join('') %>`;
        const categoriesHTML = `<%- categories.map(cat => `<option value="${cat.id}">๐ ${cat.name}</option>`).join('') %>`;

        let mmFields = JSON.parse(document.getElementById('mm_modalFieldsData').value || '[]');
        let autoRes = JSON.parse(document.getElementById('autoRespondersData').value || '[]');
        let roleRewards = JSON.parse(document.getElementById('lvl_roleRewardsData').value || '[]');
        let panelsArray = JSON.parse(document.getElementById('ticketPanelsData').value || '[]');

        // =====================================================================
        // 3. ูุญุฑู ุงูุฑุฏูุฏ ุงูุชููุงุฆูุฉ ูุฌูุงุฆุฒ ุงููููุงุช (ุงูุฏููุงูููู)
        // =====================================================================
        function renderAutoRes() {
            const container = document.getElementById('auto-responders-container');
            container.innerHTML = '';
            autoRes.forEach((res, i) => {
                container.innerHTML += `
                    <div class="flex items-center space-x-3 space-x-reverse bg-dark-900 p-3 rounded-xl border border-dark-700">
                        <input type="text" class="w-1/3 bg-dark-800 border border-dark-600 rounded-lg p-2 text-white text-sm placeholder-slate-500" placeholder="ุงููููุฉ" value="${res.triggerWord}" onchange="autoRes[${i}].triggerWord=this.value">
                        <input type="text" class="flex-1 bg-dark-800 border border-dark-600 rounded-lg p-2 text-white text-sm placeholder-slate-500" placeholder="ุงูุฑุฏ" value="${res.replyMessage}" onchange="autoRes[${i}].replyMessage=this.value">
                        <label class="flex items-center text-xs text-slate-400 whitespace-nowrap"><input type="checkbox" class="mr-1 ml-1 rounded bg-dark-800" ${res.exactMatch ? 'checked' : ''} onchange="autoRes[${i}].exactMatch=this.checked"> ุชุทุงุจู ุชุงู</label>
                        <button type="button" onclick="autoRes.splice(${i}, 1); renderAutoRes();" class="bg-red-500/20 text-red-500 p-2 rounded-lg hover:bg-red-500 hover:text-white transition">๐๏ธ</button>
                    </div>
                `;
            });
        }
        function addAutoResponderUI() { autoRes.push({ triggerWord: '', replyMessage: '', exactMatch: false }); renderAutoRes(); }

        function renderLevelRewards() {
            const container = document.getElementById('level-rewards-container');
            container.innerHTML = '';
            roleRewards.forEach((rw, i) => {
                container.innerHTML += `
                    <div class="flex items-center space-x-3 space-x-reverse bg-dark-900 p-3 rounded-xl border border-dark-700">
                        <span class="text-white font-bold text-sm">ููู:</span>
                        <input type="number" class="w-24 bg-dark-800 border border-dark-600 rounded-lg p-2 text-brand-light font-bold text-center" value="${rw.levelRequired}" onchange="roleRewards[${i}].levelRequired=parseInt(this.value)">
                        <span class="text-white font-bold text-sm">ุงูุฑุชุจุฉ:</span>
                        <select class="flex-1 bg-dark-800 border border-dark-600 rounded-lg p-2 text-white text-sm cursor-pointer" onchange="roleRewards[${i}].roleId=this.value">
                            <option value="">-- ุงุฎุชุฑ ุงูุฑุชุจุฉ --</option>
                            ${rolesOptionsHTML.replace(`value="${rw.roleId}"`, `value="${rw.roleId}" selected`)}
                        </select>
                        <button type="button" onclick="roleRewards.splice(${i}, 1); renderLevelRewards();" class="bg-red-500/20 text-red-500 p-2 rounded-lg hover:bg-red-500 hover:text-white transition">๐๏ธ</button>
                    </div>
                `;
            });
        }
        function addLevelRewardUI() { roleRewards.push({ levelRequired: 5, roleId: '' }); renderLevelRewards(); }

        // =====================================================================
        // 4. ูุญุฑู ููุงูุฐ ุงููุณุงุทุฉ (Middleman Modal Fields)
        // =====================================================================
        function renderMmFields() {
            const container = document.getElementById('mm-fields-ui-container');
            container.innerHTML = '';
            mmFields.forEach((f, i) => {
                container.innerHTML += `
                    <div class="bg-dark-800 p-4 rounded-xl border border-dark-600 relative">
                        <div class="absolute top-0 right-0 bg-dark-700 text-xs font-bold px-2 py-1 rounded-bl-lg text-slate-300">ุณุคุงู ${i + 1}</div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                            <div>
                                <label class="text-xs text-slate-400 block mb-1">ุงูุณุคุงู (Label)</label>
                                <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded text-white p-2" value="${f.label || ''}" onchange="mmFields[${i}].label=this.value">
                            </div>
                            <div>
                                <label class="text-xs text-slate-400 block mb-1">ูุซุงู ุฅุฑุดุงุฏู (Placeholder)</label>
                                <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded text-white p-2" value="${f.placeholder || ''}" onchange="mmFields[${i}].placeholder=this.value">
                            </div>
                            <div class="flex items-center space-x-4 space-x-reverse md:col-span-2 mt-1">
                                <label class="text-xs text-slate-300 flex items-center"><input type="radio" name="mm_style_${i}" value="Short" ${f.style !== 'Paragraph' ? 'checked' : ''} onchange="mmFields[${i}].style=this.value" class="mr-1 ml-1"> ุฅุฌุงุจุฉ ูุตูุฑุฉ</label>
                                <label class="text-xs text-slate-300 flex items-center"><input type="radio" name="mm_style_${i}" value="Paragraph" ${f.style === 'Paragraph' ? 'checked' : ''} onchange="mmFields[${i}].style=this.value" class="mr-1 ml-1"> ุฅุฌุงุจุฉ ุทูููุฉ</label>
                                <div class="flex-1 text-left">
                                    <button type="button" onclick="mmFields.splice(${i}, 1); renderMmFields();" class="text-xs bg-red-600 hover:bg-red-500 text-white px-3 py-1.5 rounded transition">๐๏ธ ุญุฐู ุงูุณุคุงู</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }
        function addMmFieldUI() { mmFields.push({ label: 'ุณุคุงู ุฌุฏูุฏ', placeholder: '', style: 'Short', required: true }); renderMmFields(); }

        // =====================================================================
        // 5. ูุญุฑู ุงูุจุงููุงุช ุงููุชุนุฏุฏุฉ ุงูุนููุงู (Dynamic Ticket Panels)
        // =====================================================================
        function renderAllPanels() {
            const container = document.getElementById('dynamic-panels-container');
            container.innerHTML = '';
            if (panelsArray.length === 0) {
                container.innerHTML = `<div class="text-center py-10 bg-dark-900/50 rounded-2xl border border-dashed border-dark-700"><span class="text-4xl mb-4 block opacity-50">๐ซ</span><p class="text-slate-500">ูุง ููุฌุฏ ุจุงููุงุช. ุงุถุบุท ุนูู "ุฅุถุงูุฉ ุจุงูู" ุจุงูุฃุณูู.</p></div>`;
                return;
            }

            panelsArray.forEach((panel, pIndex) => {
                let buttonsHTML = '';
                (panel.buttons || []).forEach((btn, bIndex) => {
                    let modalsHTML = '';
                    (btn.modalFields || []).forEach((mf, mIndex) => {
                        modalsHTML += `
                            <div class="flex items-center space-x-2 space-x-reverse mt-2">
                                <input type="text" class="w-1/2 bg-dark-800 border border-dark-600 rounded p-1 text-xs text-white" placeholder="ุงูุณุคุงู" value="${mf.label}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].modalFields[${mIndex}].label=this.value">
                                <input type="text" class="flex-1 bg-dark-800 border border-dark-600 rounded p-1 text-xs text-white" placeholder="ูุซุงู ููุนููู" value="${mf.placeholder}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].modalFields[${mIndex}].placeholder=this.value">
                                <button type="button" onclick="panelsArray[${pIndex}].buttons[${bIndex}].modalFields.splice(${mIndex}, 1); renderAllPanels();" class="bg-red-500 text-white px-2 py-1 rounded text-xs">X</button>
                            </div>
                        `;
                    });

                    buttonsHTML += `
                        <div class="bg-dark-800 p-4 rounded-xl border border-dark-600 mb-4 relative shadow-inner">
                            <div class="absolute top-0 right-0 bg-blue-600 text-xs font-bold px-3 py-1 rounded-bl-xl text-white flex items-center justify-between w-full">
                                <span>๐ ุฅุนุฏุงุฏุงุช ุงูุฒุฑ ${bIndex + 1}</span>
                                <button type="button" onclick="panelsArray[${pIndex}].buttons.splice(${bIndex}, 1); renderAllPanels();" class="text-red-300 hover:text-red-100 bg-red-900/50 px-2 rounded">ุญุฐู ุงูุฒุฑ ๐๏ธ</button>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                <div>
                                    <label class="text-xs text-slate-400 block mb-1">ุงุณู ุงูุฒุฑ</label>
                                    <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded p-2 text-white text-sm" value="${btn.label}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].label=this.value">
                                </div>
                                <div>
                                    <label class="text-xs text-slate-400 block mb-1">ููู ุงูุฒุฑ (Discord Style)</label>
                                    <select class="w-full bg-dark-900 border border-dark-700 rounded p-2 text-white text-sm" onchange="panelsArray[${pIndex}].buttons[${bIndex}].buttonStyle=this.value">
                                        <option value="Primary" ${btn.buttonStyle === 'Primary' ? 'selected' : ''}>ุฃุฒุฑู (Primary)</option>
                                        <option value="Success" ${btn.buttonStyle === 'Success' ? 'selected' : ''}>ุฃุฎุถุฑ (Success)</option>
                                        <option value="Danger" ${btn.buttonStyle === 'Danger' ? 'selected' : ''}>ุฃุญูุฑ (Danger)</option>
                                        <option value="Secondary" ${btn.buttonStyle === 'Secondary' ? 'selected' : ''}>ุฑูุงุฏู (Secondary)</option>
                                    </select>
                                </div>
                                <div class="flex items-center space-x-2 space-x-reverse pt-5">
                                    <label class="text-xs text-amber-400 flex items-center cursor-pointer font-bold"><input type="checkbox" class="mr-1 ml-1" ${btn.isMiddleman ? 'checked' : ''} onchange="panelsArray[${pIndex}].buttons[${bIndex}].isMiddleman=this.checked"> ๐ค ุฒุฑ ูุณุงุทุฉุ</label>
                                </div>
                            </div>

                            <hr class="border-dark-700 my-4">
                            <h5 class="text-xs font-bold text-brand-light mb-2">๐จ ุงูุฅููุจุฏ ุงูุฏุงุฎูู ููุชุฐูุฑุฉ:</h5>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded p-2 text-white text-sm" placeholder="ุงูุนููุงู ุงูุฏุงุฎูู" value="${btn.insideEmbedTitle || ''}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].insideEmbedTitle=this.value">
                                <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded p-2 text-white text-sm" placeholder="ุงููุตู ุงูุฏุงุฎูู" value="${btn.insideEmbedDesc || ''}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].insideEmbedDesc=this.value">
                                <input type="color" class="w-full h-9 bg-dark-900 border border-dark-700 rounded p-1 cursor-pointer" value="${btn.insideEmbedColor || '#2b2d31'}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].insideEmbedColor=this.value">
                            </div>

                            <div class="bg-dark-900/50 p-3 rounded-lg border border-dark-700">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-xs font-bold text-emerald-400 flex items-center cursor-pointer"><input type="checkbox" class="mr-1 ml-1" ${btn.requireModal ? 'checked' : ''} onchange="panelsArray[${pIndex}].buttons[${bIndex}].requireModal=this.checked; renderAllPanels();"> ๐ ุชูุนูู ูุงูุฐุฉ ููุจุซูุฉ (Modal) ููุฒุฑุ</label>
                                    ${btn.requireModal ? `<button type="button" onclick="if(!panelsArray[${pIndex}].buttons[${bIndex}].modalFields) panelsArray[${pIndex}].buttons[${bIndex}].modalFields = []; panelsArray[${pIndex}].buttons[${bIndex}].modalFields.push({label:'', placeholder:'', style:'Short', required:true}); renderAllPanels();" class="text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-2 py-1 rounded">โ ุณุคุงู</button>` : ''}
                                </div>
                                ${btn.requireModal ? `<input type="text" class="w-full bg-dark-800 border border-dark-600 rounded p-2 text-white text-xs mb-2" placeholder="ุนููุงู ุงููุงูุฐุฉ (Modal Title)" value="${btn.modalTitle || ''}" onchange="panelsArray[${pIndex}].buttons[${bIndex}].modalTitle=this.value">` : ''}
                                ${btn.requireModal ? modalsHTML : ''}
                            </div>
                        </div>
                    `;
                });

                container.innerHTML += `
                    <div class="bg-dark-900/80 border-2 border-dark-700 rounded-3xl p-6 shadow-2xl relative">
                        <button type="button" onclick="panelsArray.splice(${pIndex}, 1); renderAllPanels();" class="absolute top-4 left-4 bg-red-600/20 text-red-500 hover:bg-red-600 hover:text-white px-3 py-1.5 rounded-lg text-sm font-bold transition">๐๏ธ ุญุฐู ุงูุจุงูู ุจุงููุงูู</button>
                        
                        <h4 class="text-2xl font-black text-white flex items-center mb-6"><span class="bg-brand w-2 h-6 rounded-full mr-3 ml-2 inline-block"></span> ุจุงูู: ${panel.panelTitle || 'ุฌุฏูุฏ'}</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div><label class="text-xs text-slate-400 block mb-1">ุนููุงู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู</label><input type="text" class="w-full bg-dark-800 border border-dark-600 rounded-lg p-3 text-white font-bold" value="${panel.panelTitle}" onchange="panelsArray[${pIndex}].panelTitle=this.value"></div>
                            <div><label class="text-xs text-slate-400 block mb-1">ููู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู</label><input type="color" class="w-full h-12 bg-dark-800 border border-dark-600 rounded-lg p-1 cursor-pointer" value="${panel.panelColor || '#2b2d31'}" onchange="panelsArray[${pIndex}].panelColor=this.value"></div>
                            <div class="md:col-span-2"><label class="text-xs text-slate-400 block mb-1">ุงููุตู ุงูุฎุงุฑุฌู</label><textarea class="w-full bg-dark-800 border border-dark-600 rounded-lg p-3 text-white resize-y" rows="2" onchange="panelsArray[${pIndex}].panelDescription=this.value">${panel.panelDescription || ''}</textarea></div>
                            <div class="md:col-span-2"><label class="text-xs text-slate-400 block mb-1">ุฑุงุจุท ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label><input type="text" class="w-full bg-dark-800 border border-dark-600 rounded-lg p-3 text-white text-left font-mono text-sm" dir="ltr" value="${panel.imageUrl || ''}" onchange="panelsArray[${pIndex}].imageUrl=this.value"></div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 p-4 bg-dark-800 rounded-xl border border-dark-600">
                            <div><label class="text-xs font-bold text-white block mb-2">ุฑูู ุฅุฑุณุงู ุงูุจุงูุฑ</label><select class="w-full bg-dark-900 border border-dark-700 rounded-lg p-2 text-white text-sm" onchange="panelsArray[${pIndex}].channelId=this.value"><option value="">-- ุงูุฑูู --</option>${textChannelsHTML.replace(`value="${panel.channelId}"`, `value="${panel.channelId}" selected`)}</select></div>
                            <div><label class="text-xs font-bold text-white block mb-2">ูุณู ูุชุญ ุงูุชุฐุงูุฑ (Category)</label><select class="w-full bg-dark-900 border border-dark-700 rounded-lg p-2 text-white text-sm" onchange="panelsArray[${pIndex}].categoryId=this.value"><option value="">-- ุงููุณู --</option>${categoriesHTML.replace(`value="${panel.categoryId}"`, `value="${panel.categoryId}" selected`)}</select></div>
                        </div>

                        <div class="mt-4 p-5 bg-dark-900 rounded-2xl border border-dark-700">
                            <h5 class="text-lg font-bold text-brand-light mb-4">๐ ุฃุฒุฑุงุฑ ุงูุจุงูู ูููุงูุฐูุง</h5>
                            ${buttonsHTML}
                            <button type="button" onclick="if(!panelsArray[${pIndex}].buttons) panelsArray[${pIndex}].buttons=[]; panelsArray[${pIndex}].buttons.push({id: 'btn_'+Math.random().toString(36).substr(2,9), label:'ุฒุฑ ุฌุฏูุฏ', buttonStyle:'Primary', requireModal:false}); renderAllPanels();" class="w-full py-3 bg-dark-800 hover:bg-dark-700 text-white font-bold rounded-xl border border-dashed border-slate-500 transition-colors mt-2">โ ุฅุถุงูุฉ ุฒุฑ ุฌุฏูุฏ ููุฐุง ุงูุจุงูู</button>
                        </div>
                    </div>
                `;
            });
        }

        function addNewPanelUI() {
            panelsArray.push({ panelId: 'panel_' + Math.random().toString(36).substr(2, 9), panelTitle: 'ุจุงูู ุฌุฏูุฏ', panelColor: '#5865F2', buttons: [] });
            renderAllPanels();
        }

        // =====================================================================
        // 6. ุชุฌููุน ูู ุงูุจูุงูุงุช ูุจู ุงูุญูุธ ุงูููุงุฆู (SYNC BEFORE SAVE)
        // =====================================================================
        function syncAllDataBeforeSave() {
            document.getElementById('mm_modalFieldsData').value = JSON.stringify(mmFields);
            document.getElementById('autoRespondersData').value = JSON.stringify(autoRes);
            document.getElementById('lvl_roleRewardsData').value = JSON.stringify(roleRewards);
            document.getElementById('ticketPanelsData').value = JSON.stringify(panelsArray);
        }

        // ุชุดุบูู ุงูุฑูุฏุฑ ุนูุฏ ูุชุญ ุงูุตูุญุฉ
        window.onload = () => {
            renderAutoRes();
            renderLevelRewards();
            renderMmFields();
            renderAllPanels();
        };
    </script>
</body>
</html>

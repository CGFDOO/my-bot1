<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ± | MNC System</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #121212; color: #ffffff; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* ğŸ“± Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„Ø¹Ù„ÙˆÙŠ (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±) */
        .mobile-header { display: none; background-color: #1e1e24; padding: 15px 20px; align-items: center; justify-content: space-between; border-bottom: 2px solid #5865F2; }
        .menu-btn { background: #5865F2; color: white; border: none; padding: 8px 15px; font-size: 18px; border-radius: 5px; cursor: pointer; font-family: 'Tajawal', sans-serif; }

        /* ğŸ“± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { width: 260px; background-color: #1e1e24; padding: 20px; box-shadow: -2px 0 10px rgba(0,0,0,0.5); display: flex; flex-direction: column; gap: 10px; overflow-y: auto; transition: 0.3s; z-index: 1000; }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 10px; }
        .sidebar h2 { color: #5865F2; font-size: 22px; margin: 0; }
        
        /* Ø²Ø±Ø§Ø± Ø§Ù„Ø¥ÙƒØ³ (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±) */
        .close-btn { display: none; background: transparent; color: #ff4d4d; border: none; font-size: 24px; cursor: pointer; }

        .tab-btn { background: #2b2b36; color: white; border: none; padding: 15px; text-align: right; font-size: 16px; border-radius: 8px; cursor: pointer; transition: 0.3s; font-family: 'Tajawal', sans-serif; }
        .tab-btn:hover { background: #3b3b4f; }
        .tab-btn.active { background: #5865F2; font-weight: bold; }
        
        /* ğŸ“ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© */
        .content { flex: 1; padding: 30px; overflow-y: auto; background-color: #18181b; }
        .content h1 { border-bottom: 2px solid #5865F2; padding-bottom: 10px; margin-bottom: 30px; font-size: 24px; }
        .tab-content { display: none; background: #23232a; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); animation: fadeIn 0.4s; }
        .tab-content.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ğŸ›ï¸ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #b9bbbe; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 12px; background: #2f3136; border: 1px solid #202225; color: white; border-radius: 5px; font-family: 'Tajawal', sans-serif; font-size: 15px; box-sizing: border-box; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #5865F2; }
        .help-text { font-size: 12px; color: #72767d; margin-top: 5px; display: block; }
        
        /* ğŸ’¾ Ø²Ø± Ø§Ù„Ø­ÙØ¸ */
        .save-btn { background: #3ba55d; color: white; padding: 15px; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; width: 100%; margin-top: 20px; transition: 0.3s; font-family: 'Tajawal', sans-serif; font-weight: bold; }
        .save-btn:hover { background: #2d7d46; }
        .back-link { display: block; text-align: center; margin-top: 15px; color: #5865F2; text-decoration: none; }

        /* ğŸ“± ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 768px) {
            body { flex-direction: column; overflow: auto; }
            .mobile-header { display: flex; }
            .sidebar { position: fixed; right: -300px; top: 0; height: 100%; width: 250px; }
            .sidebar.open { right: 0; }
            .close-btn { display: block; }
            .content { padding: 15px; }
        }
    </style>
</head>
<body>

    <div class="mobile-header">
        <h2 style="margin: 0; color: white; font-size: 20px;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª MNC</h2>
        <button class="menu-btn" onclick="toggleSidebar()">â˜° Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>ğŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            <button class="close-btn" onclick="toggleSidebar()">âœ–</button>
        </div>
        <button class="tab-btn active" onclick="openTab(event, 'tickets')">ğŸŸï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙƒØªØ§Øª</button>
        <button class="tab-btn" onclick="openTab(event, 'roles')">ğŸ‘¨â€âš–ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ÙˆØ³Ø§Ø·Ø©</button>
        <button class="tab-btn" onclick="openTab(event, 'logs')">ğŸ“ Ø§Ù„Ø³Ø¬Ù„Ø§Øª (Ø§Ù„Ù„ÙˆØ¬Ø§Øª)</button>
        <button class="tab-btn" onclick="openTab(event, 'audit')">ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
        <button class="tab-btn" onclick="openTab(event, 'commands')">âŒ¨ï¸ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø®ØµØµØ©</button>
    </div>

    <div class="content">
        <h1>Ø³ÙŠØ±ÙØ±: <%= guild.name %></h1>
        
        <form action="/settings/<%= guild.id %>" method="POST">

            <div id="tickets" class="tab-content active">
                <h3>ğŸŸï¸ ØªØ®ØµÙŠØµ Ø§Ù„ØªÙƒØªØ§Øª ÙˆØ§Ù„Ø¥ÙŠÙ…Ø¨Ø¯</h3>
                <div class="form-group">
                    <label>Ù‚Ø³Ù… Ø§Ù„ØªÙƒØªØ§Øª (Category):</label>
                    <select name="categoryId">
                        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… --</option>
                        <% channels.filter(c => c.type === 4).forEach(c => { %>
                            <option value="<%= c.id %>" <%= config.categoryId === c.id ? 'selected' : '' %>><%= c.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø¨Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</label>
                    <input type="text" name="ticketEmbedTitle" value="<%= config.ticketEmbedTitle || 'Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„ÙˆØ³Ø§Ø·Ø©' %>">
                </div>
                <div class="form-group">
                    <label>ÙˆØµÙ Ø§Ù„Ø¥ÙŠÙ…Ø¨Ø¯ (Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø£Ùˆ Ø§Ù„Ø±Ø³Ø§Ù„Ø©):</label>
                    <input type="text" name="ticketEmbedDesc" value="<%= config.ticketEmbedDesc || 'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„ÙØªØ­ ØªØ°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©.' %>">
                </div>
                <div class="form-group">
                    <label>Ù„ÙˆÙ† Ø§Ù„Ø¥ÙŠÙ…Ø¨Ø¯ (Hex Code):</label>
                    <input type="color" name="ticketEmbedColor" value="<%= config.ticketEmbedColor || '#0099ff' %>" style="height: 50px; padding: 0; cursor: pointer;">
                </div>
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„ØªÙƒØª Ø§Ù„Ù‚Ø§Ø¯Ù… (Counter):</label>
                    <input type="number" name="ticketCount" value="<%= config.ticketCount %>">
                </div>
            </div>

            <div id="roles" class="tab-content">
                <h3>ğŸ‘¨â€âš–ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ÙˆØ³Ø§Ø·Ø©</h3>
                <div class="form-group">
                    <label>Ø±ØªØ¨Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Staff):</label>
                    <select name="staffRoleId">
                        <option value="">-- Ø§Ø®ØªØ± Ø±ØªØ¨Ø© --</option>
                        <% roles.forEach(role => { %>
                            <option value="<%= role.id %>" <%= config.staffRoleId === role.id ? 'selected' : '' %>><%= role.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø±ØªØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª):</label>
                    <select name="adminRoles" multiple style="height: 150px;">
                        <% roles.forEach(role => { %>
                            <option value="<%= role.id %>" <%= config.adminRoles && config.adminRoles.includes(role.id) ? 'selected' : '' %>><%= role.name %></option>
                        <% }) %>
                    </select>
                    <span class="help-text">Ø§Ø¶ØºØ· Ù…Ø·ÙˆÙ„Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ø±ØªØ¨Ø©.</span>
                </div>
            </div>

            <div id="logs" class="tab-content">
                <h3>ğŸ“ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</h3>
                <div class="form-group">
                    <label>Ø±ÙˆÙ… Ø§Ù„ØªØ±Ø§Ù†Ø³ÙƒØ±ÙŠØ¨Øª (Ø­ÙØ¸ Ø§Ù„ØªÙƒØªØ§Øª):</label>
                    <select name="transcriptChannelId">
                        <option value="">-- ØºÙŠØ± Ù…Ø­Ø¯Ø¯ --</option>
                        <% channels.filter(c => c.type === 0).forEach(c => { %>
                            <option value="<%= c.id %>" <%= config.transcriptChannelId === c.id ? 'selected' : '' %>><%= c.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø±ÙˆÙ… ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</label>
                    <select name="staffRatingChannelId">
                        <option value="">-- ØºÙŠØ± Ù…Ø­Ø¯Ø¯ --</option>
                        <% channels.filter(c => c.type === 0).forEach(c => { %>
                            <option value="<%= c.id %>" <%= config.staffRatingChannelId === c.id ? 'selected' : '' %>><%= c.name %></option>
                        <% }) %>
                    </select>
                </div>
            </div>

            <div id="audit" class="tab-content">
                <h3>ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© ÙˆÙ„ÙˆØ¬Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</h3>
                <div class="form-group">
                    <label>Ù„ÙˆØ¬ Ø¥Ù†Ø´Ø§Ø¡/Ø­Ø°Ù Ø§Ù„Ø±ØªØ¨:</label>
                    <select name="logRoleCreateId">
                        <option value="">-- ØºÙŠØ± Ù…Ø­Ø¯Ø¯ --</option>
                        <% channels.filter(c => c.type === 0).forEach(c => { %>
                            <option value="<%= c.id %>" <%= config.logRoleCreateId === c.id ? 'selected' : '' %>><%= c.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù„ÙˆØ¬ Ø¯Ø®ÙˆÙ„ ÙˆØ®Ø±ÙˆØ¬ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡:</label>
                    <select name="logJoinLeaveId">
                        <option value="">-- ØºÙŠØ± Ù…Ø­Ø¯Ø¯ --</option>
                        <% channels.filter(c => c.type === 0).forEach(c => { %>
                            <option value="<%= c.id %>" <%= config.logJoinLeaveId === c.id ? 'selected' : '' %>><%= c.name %></option>
                        <% }) %>
                    </select>
                </div>
            </div>

            <div id="commands" class="tab-content">
                <h3>âŒ¨ï¸ ØªØ®ØµÙŠØµ Ø§Ù„Ø£ÙˆØ§Ù…Ø±</h3>
                <div class="form-group">
                    <label>Ø£Ù…Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙƒØª (Done):</label>
                    <input type="text" name="cmdDone" value="<%= config.cmdDone || '!done' %>">
                </div>
                <div class="form-group">
                    <label>Ø£Ù…Ø± Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© (Approve):</label>
                    <input type="text" name="cmdApprove" value="<%= config.cmdApprove || '!approve' %>">
                </div>
                <div class="form-group">
                    <label>Ø£Ù…Ø± Ø³Ø­Ø¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Come):</label>
                    <input type="text" name="cmdCome" value="<%= config.cmdCome || '!come' %>">
                </div>
            </div>

            <button type="submit" class="save-btn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
            <a href="/dashboard" class="back-link">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª</a>
        </form>
    </div>

    <script>
        // ÙØªØ­ ÙˆÙ‚ÙÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("open");
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
            
            tablinks = document.getElementsByClassName("tab-btn");
            for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
            
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";

            // Ù‚ÙÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ Ø¨Ø¹Ø¯ Ù…Ø§ ØªØ®ØªØ§Ø± (Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„)
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
        }
    </script>
</body>
</html>

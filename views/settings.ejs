<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Dashboard | ุชุญูู ุงูุณูุฑูุฑ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Tajawal', 'sans-serif'] },
                    colors: {
                        brand: { DEFAULT: '#5865F2', dark: '#4752C4', light: '#7289DA' },
                        dark: { 900: '#0b0f19', 800: '#151b2b', 700: '#1f2937' }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0b0f19; color: #f8fafc; overflow-x: hidden; scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0b0f19; }
        ::-webkit-scrollbar-thumb { background: #1f2937; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #5865F2; }
        
        .glass-card {
            background: rgba(21, 27, 43, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }
        
        .input-glow:focus { box-shadow: 0 0 0 3px rgba(88, 101, 242, 0.25); border-color: #5865F2; outline: none; }
        
        /* ุชุฃุซูุฑ ุงูููุงุชูุญ (Toggle Switches) */
        .toggle-checkbox:checked { right: 0; border-color: #10B981; }
        .toggle-checkbox:checked + .toggle-label { background-color: #10B981; }
        .toggle-checkbox { right: 0; z-index: 1; border-color: #374151; transition: all 0.3s ease; }
        .toggle-label { width: 3rem; height: 1.5rem; background-color: #374151; border-radius: 9999px; transition: all 0.3s ease; }
        
        .settings-section { display: none; animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .settings-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<% 
    // =========================================================================================
    // ๐ง ุงูุนูู ุงููุฏุจุฑ ูุฌูุจ ุจูุงูุงุช ุงูุณูุฑูุฑ (ููุงุฆู ุงูุฑููุงุช ูุงูุฑุชุจ ุงูุฐููุฉ)
    // =========================================================================================
    let textChannels = [];
    let voiceChannels = [];
    let categories = [];
    let serverRoles = [];
    let guildName = "Unknown Server";
    let guildIconUrl = "https://cdn.discordapp.com/embed/avatars/0.png";

    if (bot && guildId) {
        const currentGuild = bot.guilds.cache.get(guildId);
        if (currentGuild) {
            guildName = currentGuild.name;
            if (currentGuild.icon) guildIconUrl = `https://cdn.discordapp.com/icons/${guildId}/${currentGuild.icon}.png`;
            
            // ุฌูุจ ุงูุฑููุงุช ุงููุตูุฉ (ููุน 0) ูุฑููุงุช ุงูุฅุนูุงูุงุช (ููุน 5)
            textChannels = currentGuild.channels.cache.filter(c => c.type === 0 || c.type === 5).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            // ุฌูุจ ุงูุฑููุงุช ุงูุตูุชูุฉ (ููุน 2)
            voiceChannels = currentGuild.channels.cache.filter(c => c.type === 2).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            // ุฌูุจ ุงูุฃูุณุงู (ููุน 4)
            categories = currentGuild.channels.cache.filter(c => c.type === 4).sort((a, b) => a.position - b.position).map(c => ({ id: c.id, name: c.name }));
            // ุฌูุจ ุงูุฑุชุจ ูุชุฎุทู ุฑุชุจุฉ @everyone
            serverRoles = currentGuild.roles.cache.filter(r => r.id !== guildId).sort((a, b) => b.position - a.position).map(r => ({ id: r.id, name: r.name, color: r.hexColor }));
        }
    }
%>

<body class="flex h-screen overflow-hidden selection:bg-brand selection:text-white">

    <aside class="w-72 flex-shrink-0 border-l border-dark-700 bg-dark-800 flex flex-col z-20 shadow-2xl">
        <div class="h-24 flex flex-col items-center justify-center border-b border-dark-700 px-4 bg-dark-900/50">
            <h1 class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-500 tracking-wider">ENTERPRISE</h1>
            <p class="text-xs text-slate-500 font-bold uppercase tracking-widest mt-1">Ultimate Control</p>
        </div>

        <nav class="flex-1 overflow-y-auto py-6 px-4 space-y-1.5" id="sidebar-nav">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-2 px-2">ุงูุฃุณุงุณูุงุช</div>
            <button onclick="switchSection('general')" class="nav-btn active-nav w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 bg-brand text-white shadow-lg shadow-brand/20" data-target="general">
                <span>โ๏ธ</span> <span class="font-bold">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</span>
            </button>
            <button onclick="switchSection('embeds')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="embeds">
                <span>๐จ</span> <span class="font-bold">ุฃููุงู ุงูุฅููุจุฏ ุงูุดุงููุฉ</span>
            </button>

            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6 px-2">ุงูุชุฐุงูุฑ ูุงููุณุงุทุฉ</div>
            <button onclick="switchSection('middleman')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="middleman">
                <span>โ๏ธ</span> <span class="font-bold">ูุธุงู ุงููุณุงุทุฉ (ุงููุนุฒูู)</span>
            </button>
            <button onclick="switchSection('custom_panels')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="custom_panels">
                <span>๐ซ</span> <span class="font-bold">ุงูุจุงููุงุช ุงููุชุนุฏุฏุฉ (ุงูุฏููุงููููุฉ)</span>
            </button>
            <button onclick="switchSection('ticket_controls')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="ticket_controls">
                <span>๐๏ธ</span> <span class="font-bold">ุงูุชุญูู ุงูุฐูู ูุงูุชุฑุงูุณูุฑูุจุช</span>
            </button>

            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6 px-2">ุงูุชููููุงุช ูุงูุฃูุงูุฑ</div>
            <button onclick="switchSection('ratings')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="ratings">
                <span>โญ</span> <span class="font-bold">ุงูุชููููุงุช (ุฏุนู/ูุณุงุทุฉ)</span>
            </button>
            <button onclick="switchSection('roles')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="roles">
                <span>๐</span> <span class="font-bold">ุงูุฑุชุจ ูุงูุตูุงุญูุงุช</span>
            </button>
            <button onclick="switchSection('commands')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="commands">
                <span>โจ๏ธ</span> <span class="font-bold">ุชุฎุตูุต ุงูุฃูุงูุฑ</span>
            </button>

            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6 px-2">ุงูุญูุงูุฉ ูุงููุฑุงูุจุฉ</div>
            <button onclick="switchSection('protection')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="protection">
                <span>๐ก๏ธ</span> <span class="font-bold">ุงูุญูุงูุฉ (Anti-Nuke/Spam)</span>
            </button>
            <button onclick="switchSection('warnings')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="warnings">
                <span>โ๏ธ</span> <span class="font-bold">ุงูุชุญุฐูุฑุงุช (Warnings)</span>
            </button>
            <button onclick="switchSection('logs')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="logs">
                <span>๐</span> <span class="font-bold">ุณุฌูุงุช ุงูุณูุฑูุฑ (Logs)</span>
            </button>

            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6 px-2">ุงูุฃุนุถุงุก ูุงูุชูุงุนู</div>
            <button onclick="switchSection('welcome')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="welcome">
                <span>๐</span> <span class="font-bold">ุงูุชุฑุญูุจ ูุงููุบุงุฏุฑุฉ</span>
            </button>
            <button onclick="switchSection('auto_roles')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="auto_roles">
                <span>๐ค</span> <span class="font-bold">ุงูุฑุฏ ูุงูุฑุชุจ ุงูุชููุงุฆูุฉ</span>
            </button>
            <button onclick="switchSection('leveling')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="leveling">
                <span>๐</span> <span class="font-bold">ูุธุงู ุงููููุงุช (Leveling)</span>
            </button>
            <button onclick="switchSection('economy')" class="nav-btn w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all duration-200 text-slate-400 hover:bg-dark-700 hover:text-white" data-target="economy">
                <span>๐ฐ</span> <span class="font-bold">ุงูุงูุชุตุงุฏ ูุงูุฃูุนุงุจ (Economy)</span>
            </button>

        </nav>

        <div class="p-4 border-t border-dark-700 bg-dark-900/30">
            <a href="/dashboard" class="flex items-center justify-center w-full px-4 py-3 text-sm font-bold text-slate-300 transition-colors bg-dark-700 rounded-xl hover:bg-red-500 hover:text-white shadow-md">
                <span>ุฑุฌูุน ููุณูุฑูุฑุงุช</span> <span class="mr-2">๐</span>
            </a>
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen relative bg-dark-900">
        
        <div class="absolute top-0 right-0 w-full h-96 bg-gradient-to-b from-brand/10 to-transparent pointer-events-none"></div>

        <header class="h-24 flex-shrink-0 border-b border-dark-700 bg-dark-800/80 backdrop-blur-xl flex items-center justify-between px-10 z-10 shadow-sm">
            <div class="flex items-center space-x-5 space-x-reverse">
                <img src="<%= guildIconUrl %>" alt="Guild Icon" class="w-14 h-14 rounded-full border-2 border-brand shadow-lg shadow-brand/30 object-cover">
                <div>
                    <h2 class="text-2xl font-black text-white tracking-wide"><%= guildName %></h2>
                    <p class="text-sm text-slate-400 font-mono mt-1 flex items-center">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 ml-2 animate-pulse"></span>
                        ID: <%= guildId %>
                    </p>
                </div>
            </div>
            
            <div class="flex items-center gap-4 bg-dark-900 py-2 px-5 rounded-full border border-dark-700 shadow-inner">
                <img class="h-9 w-9 rounded-full border border-slate-600" src="https://cdn.discordapp.com/avatars/<%= user.id %>/<%= user.avatar %>.png" alt="Avatar">
                <span class="text-sm font-bold text-slate-200"><%= user.username %></span>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-10 z-10 scroll-smooth relative" id="main-scroll-area">
            
            <% if (typeof success !== 'undefined' && success) { %>
                <div class="mb-8 bg-emerald-500/10 border-l-4 border-emerald-500 text-emerald-400 px-6 py-5 rounded-r-xl flex items-center shadow-lg">
                    <span class="text-2xl ml-4">โ</span>
                    <div>
                        <h4 class="font-bold text-lg">ุชู ุงูุญูุธ ุจูุฌุงุญ!</h4>
                        <p class="text-sm opacity-80">ุชู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ุนูู ุงูุณูุฑูุฑ ููุฑุงู.</p>
                    </div>
                </div>
            <% } %>

            <form action="/settings/<%= guildId %>/save" method="POST" id="mega-settings-form">
                
                <div id="section-general" class="settings-section active max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h2>
                        <p class="text-slate-400 text-lg">ุงูุชุญูู ูู ุงูุจุงุฏุฆุฉ (Prefix) ููุบุฉ ุงูุจูุช ุงูุฃุณุงุณูุฉ ูู ุงูุณูุฑูุฑ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-brand">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุจุงุฏุฆุฉ ุงูุฃูุงูุฑ (Prefix)</label>
                                <input type="text" name="prefix" value="<%= config.prefix || '!' %>" required
                                    class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow font-mono text-xl text-center placeholder-slate-600"
                                    placeholder="!">
                                <p class="mt-2 text-sm text-slate-500">ุงูุฑูุฒ ุงููุณุชุฎุฏู ูุจู ุฃู ุฃูุฑุ ูุซู <span class="text-brand font-bold">!help</span></p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุบุฉ ุงูุจูุช (Bot Language)</label>
                                <select name="language" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow font-bold text-lg cursor-pointer">
                                    <option value="ar" <%= config.language === 'ar' ? 'selected' : '' %>>๐ธ๐ฆ ุงูุนุฑุจูุฉ (Arabic)</option>
                                    <option value="en" <%= config.language === 'en' ? 'selected' : '' %>>๐บ๐ธ ุงูุฅูุฌููุฒูุฉ (English)</option>
                                </select>
                                <p class="mt-2 text-sm text-slate-500">ูุบุฉ ุงูุชุญุฐูุฑุงุช ูุงูุฑุณุงุฆู ุงูุฃุณุงุณูุฉ ุงูุชู ูุฑุณููุง ุงูุจูุช.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-middleman" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ูุธุงู ุงููุณุงุทุฉ (Middleman)</h2>
                            <p class="text-slate-400 text-lg">ูุฐุง ุงูุจุงูู ูุนุฒูู ุชูุงูุงูุ ูุง ูุฑุณู ุชููููุงุช ููุฅุฏุงุฑุฉุ ููุนุชูุฏ ุนูู ุฃูุฑ <code class="bg-dark-700 px-2 py-1 rounded text-brand">!done</code> ูุชูููู ุงููุณูุท.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงููุธุงู</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="mm_enabled" id="mm_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.middlemanSystem.enabled ? 'checked' : '' %>>
                                <label for="mm_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-amber-500">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ุฅุนุฏุงุฏุงุช ุงูุฑููุงุช ูุงูุฃูุณุงู</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุณู ุงูุชุฐุงูุฑ (Category)</label>
                                <select name="mm_categoryId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงููุณู ุงูุฐู ุณุชูุชุญ ููู ุงูุชุฐุงูุฑ --</option>
                                    <% categories.forEach(cat => { %>
                                        <option value="<%= cat.id %>" <%= config.middlemanSystem.categoryId === cat.id ? 'selected' : '' %>>๐ <%= cat.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูุจุงูู (Panel Channel)</label>
                                <select name="mm_panelChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุงูุฑูู ุงูุชู ุณูุฑุณู ูููุง ุงูุจูุช ุฒุฑ ุงููุณุงุทุฉ --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.middlemanSystem.panelChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-amber-400">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐ผ๏ธ</span> ุชุฎุตูุต ุงูุจุงูู ุงูุฎุงุฑุฌู (Outside Embed)</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงูุฅููุจุฏ (Title)</label>
                                <input type="text" name="mm_panelTitle" value="<%= config.middlemanSystem.panelTitle || 'ุชุฐูุฑุฉ ูุณุงุทุฉ ุขููุฉ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold text-lg">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุตู ุงูุฅููุจุฏ (Description) - ูุฏุนู ุงูุฒุฎุงุฑู ูุงูุฎุทูุท</label>
                                <textarea name="mm_panelDescription" rows="4" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow resize-y"><%= config.middlemanSystem.panelDescription || 'ูุทูุจ ูุณูุท ูุนุชูุฏ ูู ุงูุฅุฏุงุฑุฉุ ูุฑุฌู ูุชุญ ุชุฐูุฑุฉ ูู ููุง.\n\nโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌโฌ\n๐ก๏ธ **ุฃูุงู ุชุงู** | โฑ๏ธ **ุณุฑุนุฉ ูู ุงูุฑุฏ**' %></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุงูุฅููุจุฏ (Color)</label>
                                    <div class="flex items-center space-x-3 space-x-reverse">
                                        <input type="color" id="mm_panel_color_picker" value="<%= config.middlemanSystem.panelColor || '#f2a658' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('mm_panelColor').value = this.value">
                                        <input type="text" id="mm_panelColor" name="mm_panelColor" value="<%= config.middlemanSystem.panelColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('mm_panel_color_picker').value = this.value">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฒุฑ (Button Label)</label>
                                    <input type="text" name="mm_buttonLabel" value="<%= config.middlemanSystem.buttonLabel || 'ุทูุจ ูุณูุท ๐ก๏ธ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-bold">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-amber-300">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ุงููุงูุฐุฉ ูุงูุฅููุจุฏ ุงูุฏุงุฎูู (Modal & Inside)</h3>
                        
                        <div class="space-y-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุนููู (Modal Title)</label>
                                <input type="text" name="mm_modalTitle" value="<%= config.middlemanSystem.modalTitle || 'ุจูุงูุงุช ุงููุณุงุทุฉ (Trade Info)' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>

                            <div class="bg-dark-900/50 p-6 rounded-2xl border border-dark-700">
                                <label class="block text-sm font-bold text-slate-300 mb-3 flex justify-between">
                                    <span>ุฃุณุฆูุฉ ุงููุงูุฐุฉ (Modal Fields - JSON)</span>
                                    <span class="text-amber-500 text-xs bg-amber-500/10 px-2 py-1 rounded">Advanced</span>
                                </label>
                                <textarea name="mm_modalFieldsData" rows="6" dir="ltr" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-4 px-5 text-emerald-400 input-glow font-mono text-sm leading-relaxed resize-y"><%= JSON.stringify(config.middlemanSystem.modalFields && config.middlemanSystem.modalFields.length > 0 ? config.middlemanSystem.modalFields : [{label: "ููุน ุงููุนุงููุฉุ", placeholder: "ูุซุงู: ุจูุน ุญุณุงุจ", style: "Short", required: true}, {label: "ุงูููุงุจูุ", placeholder: "ูุซุงู: 50 ุฏููุงุฑ", style: "Short", required: true}], null, 4) %></textarea>
                            </div>

                            <hr class="border-dark-700 my-6">

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุนููุงู ุงูุฅููุจุฏ ุฏุงุฎู ุงูุชุฐูุฑุฉ (Inside Embed Title)</label>
                                <input type="text" name="mm_insideTicketTitle" value="<%= config.middlemanSystem.insideTicketTitle || 'ุชุฐูุฑุฉ ุงููุณุงุทุฉ' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุตู ุงูุฅููุจุฏ ุฏุงุฎู ุงูุชุฐูุฑุฉ (ูุฏุนู ููุดู ุงูุนููู ุจู {user})</label>
                                <textarea name="mm_insideTicketDescription" rows="4" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow resize-y"><%= config.middlemanSystem.insideTicketDescription || 'ุฃููุงู ุจู {user}ุ ูุฑุฌู ุงูุชุธุงุฑ ุงููุณูุท ูุนุฏู ุงูุฅุฒุนุงุฌ.\nุณูุชู ุงูุฑุฏ ุนููู ูู ุฃูุฑุจ ููุช.' %></textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุงูุฅููุจุฏ ุงูุฏุงุฎูู</label>
                                <div class="flex items-center space-x-3 space-x-reverse w-full md:w-1/2">
                                    <input type="color" id="mm_inside_color_picker" value="<%= config.middlemanSystem.insideTicketColor || '#f2a658' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('mm_insideTicketColor').value = this.value">
                                    <input type="text" id="mm_insideTicketColor" name="mm_insideTicketColor" value="<%= config.middlemanSystem.insideTicketColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('mm_inside_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

 <div id="section-custom_panels" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุจุงููุงุช ุงููุชุนุฏุฏุฉ (Ticket Panels)</h2>
                            <p class="text-slate-400 text-lg">ุงุตูุน ุนุฏุฏ ูุง ููุงุฆู ูู ุจุงููุงุช ุงูุชุฐุงูุฑ (ุฏุนูุ ุดูุงููุ ุชูุฏููุงุช) ูุน ุชุญูู ูุงูู ูู ุงูุฃุฒุฑุงุฑ ูุงูุฅููุจุฏุงุช.</p>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-blue-500">
                        
                        <input type="hidden" name="ticketPanelsData" id="ticketPanelsData" value="<%= JSON.stringify(config.ticketPanels || []) %>">
                        
                        <div id="dynamic-panels-container" class="space-y-8">
                            <div class="text-center py-10 bg-dark-900/50 rounded-2xl border border-dashed border-dark-700">
                                <span class="text-4xl mb-4 block">๐๏ธ</span>
                                <h3 class="text-xl font-bold text-white mb-2">ุฌุงุฑู ุชุญููู ูุธุงู ุงูุจุงููุงุช ุงูุฐูู...</h3>
                                <p class="text-slate-500">ููููู ุฅุถุงูุฉ ุจุงููุงุชุ ุชุนุฏูู ุฃููุงู ุงูุฅููุจุฏุ ูุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุฃู ููุงูุฐ (Modals) ููู ุฒุฑ.</p>
                            </div>
                        </div>

                        <div class="mt-8 flex justify-center">
                            <button type="button" onclick="addNewPanelUI()" class="flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20">
                                <span class="text-xl mr-2 ml-2">โ</span> ุฅุถุงูุฉ ุจุงูู ุชุฐุงูุฑ ุฌุฏูุฏ
                            </button>
                        </div>
                    </div>
                </div>

                <div id="section-ticket_controls" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุชุญูู ุงูุฐูู ูุงูุชุฑุงูุณูุฑูุจุช</h2>
                        <p class="text-slate-400 text-lg">ุชุญูู ูู ุงูุชุฐุงูุฑุ ุณุฌูุงุช ุงูุญูุธ (Transcript)ุ ูุฃุฒุฑุงุฑ ุงูุฅุฏุงุฑุฉ (ุงุณุชูุงู ูุฅุบูุงู).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-indigo-500">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">โ๏ธ</span> ุฅุนุฏุงุฏุงุช ุงูุชุฐุงูุฑ ุงูุนุงูุฉ</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุญุฏ ุงูุฃูุตู ููุชุฐุงูุฑ ุงูููุชูุญุฉ ููู ุนุถู</label>
                                <input type="number" name="tc_maxOpenTicketsPerUser" value="<%= config.ticketControls.maxOpenTicketsPerUser || 1 %>" min="1" max="10"
                                    class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-5 text-white input-glow font-mono text-xl">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุจุงูู ุงูุชุญูู ุงูุฅุฏุงุฑู (ุฒุฑ ุงูุฅุบูุงู ูุงูุงุณุชูุงู)</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="tc_color_picker" value="<%= config.ticketControls.controlPanelColor || '#2b2d31' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('tc_controlPanelColor').value = this.value">
                                    <input type="text" id="tc_controlPanelColor" name="tc_controlPanelColor" value="<%= config.ticketControls.controlPanelColor || '#2b2d31' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('tc_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ุณุฌูุงุช ุงูุชุฐุงูุฑ ูุงูุชุฑุงูุณูุฑูุจุช</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุณุฌู ุงูุชุฐุงูุฑ (ูุชุญ / ุฅุบูุงู)</label>
                                <select name="tc_ticketLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูููุฌ --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ticketControls.ticketLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุญูุธ ุงูุชุฑุงูุณูุฑูุจุช (ุญูุธ ุงููุญุงุฏุซุงุช)</label>
                                <select name="tc_transcriptChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชุฑุงูุณูุฑูุจุช --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ticketControls.transcriptChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐ก๏ธ</span> ุตูุงุญูุงุช ุงุณุชูุงู ุงูุชุฐูุฑุฉ (Claim System)</h3>
                        
                        <div class="space-y-5">
                            <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ุฅุฎูุงุก ุงูุชุฐูุฑุฉ ุนู ุจุงูู ุงูุฅุฏุงุฑุฉ</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุนูุฏูุง ูุถุบุท ุงูุฅุฏุงุฑู ุนูู ุฒุฑ (ุงุณุชูุงู)ุ ุณุชุฎุชูู ุงูุชุฐูุฑุฉ ูู ุจุงูู ุงูุฅุฏุงุฑููู ููุชุงุจุน ูู ุงูุนูู.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="tc_hideTicketOnClaim" id="tc_hideTicketOnClaim" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ticketControls.hideTicketOnClaim ? 'checked' : '' %>>
                                    <label for="tc_hideTicketOnClaim" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ุชุญููู ุงูุชุฐูุฑุฉ ูููุฑุงุกุฉ ููุท (Read-Only)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ูููุน ุจุงูู ุงูุฅุฏุงุฑููู ูู ุงููุชุงุจุฉ ูู ุงูุชุฐูุฑุฉ ุจุนุฏ ุงุณุชูุงููุง ุจูุงุณุทุฉ ุฅุฏุงุฑู ุขุฎุฑ.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="tc_readOnlyStaffOnClaim" id="tc_readOnlyStaffOnClaim" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ticketControls.readOnlyStaffOnClaim ? 'checked' : '' %>>
                                    <label for="tc_readOnlyStaffOnClaim" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-ratings" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ูุธุงู ุงูุชููููุงุช ุงููุฒุฏูุฌ (Ratings)</h2>
                        <p class="text-slate-400 text-lg">ูุตู ูุงูู ุจูู ุชูููู ุงููุณุงุทุฉ ูุชูููู ุงูุฏุนู ุงููููุ ูุน ุฎูุงุฑุงุช ุฌุงูุฒุฉ ูุญุฑูุฉ ููุนููู.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-yellow-500">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">โ๏ธ</span> ุชููููุงุช ุงููุณุงุทุฉ (ุฃูุฑ !done)</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุชููููุงุช ุงููุณุทุงุก (Middleman Ratings)</label>
                                <select name="rating_middlemanLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชูููู --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ratings.middlemanLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุชูููู ุงููุณูุท</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="rating_mm_color_picker" value="<%= config.ratings.middlemanEmbedColor || '#f2a658' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('rating_middlemanEmbedColor').value = this.value">
                                    <input type="text" id="rating_middlemanEmbedColor" name="rating_middlemanEmbedColor" value="<%= config.ratings.middlemanEmbedColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('rating_mm_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐จโ๐ป</span> ุชููููุงุช ุงูุฏุนู ุงูููู (ุฅุบูุงู ุงูุชุฐุงูุฑ)</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุชููููุงุช ุงูุฅุฏุงุฑุฉ (Staff Ratings)</label>
                                <select name="rating_staffLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชูููู --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.ratings.staffLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุชูููู ุงูุฏุนู</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="rating_staff_color_picker" value="<%= config.ratings.staffEmbedColor || '#3ba55d' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('rating_staffEmbedColor').value = this.value">
                                    <input type="text" id="rating_staffEmbedColor" name="rating_staffEmbedColor" value="<%= config.ratings.staffEmbedColor || '#3ba55d' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('rating_staff_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ูุตูุต ุงูุชูููู (ุงูุฎูุงุฑุงุช ูุงูุญุฑูุฉ)</h3>

                        <div class="space-y-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุชููููุงุช ุงูุฌุงูุฒุฉ (Preset Options)</label>
                                <textarea name="rating_customReviewOptions" rows="4" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow leading-relaxed resize-y" placeholder="ุชุนุงูู ุณุฑูุน ูููุชุงุฒ&#10;ูุณูุท ูุญุชุฑู&#10;Good and fast service"><%= (config.ratings.customReviewOptions && config.ratings.customReviewOptions.length > 0) ? config.ratings.customReviewOptions.join('\n') : 'ุชุนุงูู ุณุฑูุน ุฌุฏุงู ๐\nูุณูุท ูุถููู ููุญุชุฑู ๐\nุดูุฑุงู ุนูู ุณุฑุนุฉ ุงูุฑุฏ โค๏ธ' %></textarea>
                                <p class="mt-2 text-sm text-amber-500 font-bold">ุถุน ูู ุชูููู ูู ุณุทุฑ ูููุตู (ููููู ุงุณุชุฎุฏุงู ุงูุนุฑุจู ูุงูุฅูุฌููุฒู). ุณุชุธูุฑ ูุฐู ุงูุฎูุงุฑุงุช ููุงุฆูุฉ ููุนููู ููุฎุชุงุฑ ูููุง.</p>
                            </div>

                            <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700">
                                <div>
                                    <h3 class="text-lg font-bold text-white">ุงูุณูุงุญ ุจูุชุงุจุฉ ุชูููู ุญุฑ (Custom Text)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ูุณูุญ ููุนููู ุจุงุฎุชูุงุฑ "ุชูููู ุขุฎุฑ" ูููุชุญ ูู ูุงูุฐุฉ ููุชุจ ูููุง ุฑุฃูู ุจููุณู.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="rating_allowCustomText" id="rating_allowCustomText" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.ratings.allowCustomText ? 'checked' : '' %>>
                                    <label for="rating_allowCustomText" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

<div id="section-roles" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุฑุชุจ ูุงูุตูุงุญูุงุช (Roles)</h2>
                        <p class="text-slate-400 text-lg">ุญุฏุฏ ุงูุฑุชุจ ุงููุณุคููุฉ ุนู ุงูุฏุนู ูุงููุณุงุทุฉ. (ููุฑุชุจ ุงููุชุนุฏุฏุฉุ ุงุถุบุท ุจุงุณุชูุฑุงุฑ ุนูู Ctrl ุฃู Command ูุงุฎุชูุงุฑ ุฃูุซุฑ ูู ุฑุชุจุฉ).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-purple-500">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ุงูุฑุชุจ ุงูุฃุณุงุณูุฉ (Basic Roles)</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุชุจุฉ ุงูุฏุนู ุงูููู (Staff Role)</label>
                                <select name="role_adminRoleId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑุชุจุฉ ุงูุฏุนู --</option>
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= config.roles.adminRoleId === role.id ? 'selected' : '' %>>๐ก๏ธ <%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุชุจุฉ ุงููุณูุท ุงูุฃุณุงุณูุฉ (Middleman Role)</label>
                                <select name="role_middlemanRoleId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑุชุจุฉ ุงููุณูุท --</option>
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= config.roles.middlemanRoleId === role.id ? 'selected' : '' %>>โ๏ธ <%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐ฅ</span> ุงูุฑุชุจ ุงููุชุนุฏุฏุฉ (ุงูุฅุฏุงุฑุฉ ุงูุนููุง ูุฑุชุจ ุงูุชุฑูุฏ)</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงูุชู ูุชู ููุดูุชูุง ุนูุฏ ุทูุจ ูุณุงุทุฉ (Ping Roles)</label>
                                <select name="role_tradePingRoleIds" multiple class="w-full h-32 bg-dark-900 border border-dark-700 rounded-2xl py-3 px-4 text-white input-glow cursor-pointer font-medium scroll-smooth custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.roles.tradePingRoleIds && config.roles.tradePingRoleIds.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                                <p class="mt-2 text-xs text-amber-500 font-bold">ุงุถุบุท Ctrl ูุงุฎุชูุงุฑ ุฃูุซุฑ ูู ุฑุชุจุฉ.</p>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงูุชู ูุญู ููุง ุงูููุงููุฉ/ุงูุฑูุถ (Approve Roles)</label>
                                <select name="role_tradeApproveRoleIds" multiple class="w-full h-32 bg-dark-900 border border-dark-700 rounded-2xl py-3 px-4 text-white input-glow cursor-pointer font-medium scroll-smooth custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.roles.tradeApproveRoleIds && config.roles.tradeApproveRoleIds.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-commands" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุชุฎุตูุต ุงูุฃูุงูุฑ ูุงูุฑุชุจ (Commands)</h2>
                        <p class="text-slate-400 text-lg">ูู ุจุชุบููุฑ ุงุณู ุฃู ุฃูุฑุ ูุญุฏุฏ ุงูุฑุชุจ ุงููุณููุญ ููุง ุจุงุณุชุฎุฏุงูู (ููููู ุงุฎุชูุงุฑ ุนุฏุฉ ุฑุชุจ ููู ุฃูุฑ).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-cyan-500 space-y-10">
                        
                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐งน</span> ุฃูุฑ ูุณุญ ุงูุฑุณุงุฆู (Clear)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฃูุฑ</label>
                                    <input type="text" name="cmd_clearCmd" value="<%= config.commands.clearCmd || 'clear' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง</label>
                                    <select name="cmd_clearAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.clearAllowedRoles && config.commands.clearAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐จ</span> ุฃูุฑ ุงูุญุธุฑ (Ban)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฃูุฑ</label>
                                    <input type="text" name="cmd_banCmd" value="<%= config.commands.banCmd || 'ban' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง</label>
                                    <select name="cmd_banAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.banAllowedRoles && config.commands.banAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">โณ</span> ุฃูุฑ ุงูุฅุณูุงุช (Timeout)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฃูุฑ</label>
                                    <input type="text" name="cmd_timeoutCmd" value="<%= config.commands.timeoutCmd || 'timeout' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง</label>
                                    <select name="cmd_timeoutAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.timeoutAllowedRoles && config.commands.timeoutAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐ข</span> ุฃูุฑ ุงูุงุณุชุฏุนุงุก (Come)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุงูุฃูุฑ</label>
                                    <input type="text" name="cmd_comeCmd" value="<%= config.commands.comeCmd || 'come' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง</label>
                                    <select name="cmd_comeAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.comeAllowedRoles && config.commands.comeAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-amber-500/30">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">โ๏ธ</span> ุฃูุงูุฑ ุงููุณุงุทุฉ (Trade & Done)</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุฃูุฑ ุงูุชูุงุตูู (Trade)</label>
                                    <input type="text" name="cmd_tradeCmd" value="<%= config.commands.tradeCmd || 'trade' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง ุจุฃูุฑ Trade</label>
                                    <select name="cmd_tradeAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.tradeAllowedRoles && config.commands.tradeAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงุณู ุฃูุฑ ุงูุฅููุงุก (Done)</label>
                                    <input type="text" name="cmd_doneCmd" value="<%= config.commands.doneCmd || 'done' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณููุญ ููุง ุจุฃูุฑ Done</label>
                                    <select name="cmd_doneAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                        <% serverRoles.forEach(role => { %>
                                            <option value="<%= role.id %>" <%= (config.commands.doneAllowedRoles && config.commands.doneAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุชูุงุตูู ุงููุนุงููุฉ (Trade Embed Color)</label>
                                <div class="flex items-center space-x-3 space-x-reverse md:w-1/2">
                                    <input type="color" id="cmd_trade_color_picker" value="<%= config.commands.tradeEmbedColor || '#f2a658' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('cmd_tradeEmbedColor').value = this.value">
                                    <input type="text" id="cmd_tradeEmbedColor" name="cmd_tradeEmbedColor" value="<%= config.commands.tradeEmbedColor || '#f2a658' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('cmd_trade_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div id="section-logs" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุณุฌูุงุช ุงูุณูุฑูุฑ (Logs)</h2>
                        <p class="text-slate-400 text-lg">ูุฑุงูุจุฉ ุดุงููุฉ ููู ูุง ูุญุฏุซ ูู ุงูุณูุฑูุฑ (ุฑุณุงุฆูุ ุฃุนุถุงุกุ ุตูุชูุงุชุ ุญูุงูุฉ).</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-teal-500 space-y-10">
                        
                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐ฌ</span> ุณุฌู ุงูุฑุณุงุฆู (ุญุฐู ูุชุนุฏูู)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุณุฌู ุงูุฑุณุงุฆู</label>
                                    <select name="log_messageLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.serverLogs.messageLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงูุฑุณุงุฆู</label>
                                    <div class="flex items-center space-x-3 space-x-reverse">
                                        <input type="color" id="log_msg_color_picker" value="<%= config.serverLogs.messageLogEmbedColor || '#fee75c' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('log_messageLogEmbedColor').value = this.value">
                                        <input type="text" id="log_messageLogEmbedColor" name="log_messageLogEmbedColor" value="<%= config.serverLogs.messageLogEmbedColor || '#fee75c' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('log_msg_color_picker').value = this.value">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐</span> ุณุฌู ุงูุฏุฎูู ูุงูุฎุฑูุฌ (Join/Leave)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                <div class="col-span-1 md:col-span-3">
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุณุฌู ุงูุฏุฎูู ูุงูุฎุฑูุฌ</label>
                                    <select name="log_memberJoinLeaveLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.serverLogs.memberJoinLeaveLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงูุฏุฎูู</label>
                                    <input type="color" name="log_memberJoinEmbedColor" value="<%= config.serverLogs.memberJoinEmbedColor || '#3ba55d' %>" class="w-full h-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงูุฎุฑูุฌ</label>
                                    <input type="color" name="log_memberLeaveEmbedColor" value="<%= config.serverLogs.memberLeaveEmbedColor || '#ed4245' %>" class="w-full h-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1">
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">๐๏ธ</span> ุณุฌู ุงูุตูุชูุงุช (Voice States)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุณุฌู ุงููููุณ</label>
                                    <select name="log_voiceStateLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.serverLogs.voiceStateLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงููููุณ</label>
                                    <input type="color" name="log_voiceStateEmbedColor" value="<%= config.serverLogs.voiceStateEmbedColor || '#5865F2' %>" class="w-full h-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1">
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-red-500/30">
                            <h3 class="text-xl font-bold text-white mb-5 flex items-center"><span class="mr-3">โ</span> ุณุฌู ุงูุญุธุฑ ูุงูุทุฑุฏ (Ban & Kick)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุณุฌู ุงูุนููุจุงุช</label>
                                    <select name="log_banKickLogChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                        <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                        <% textChannels.forEach(ch => { %>
                                            <option value="<%= ch.id %>" <%= config.serverLogs.banKickLogChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงูุนููุจุงุช</label>
                                    <input type="color" name="log_banKickEmbedColor" value="<%= config.serverLogs.banKickEmbedColor || '#992d22' %>" class="w-full h-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

<div id="section-warnings" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุชุญุฐูุฑุงุช ูุงูุนููุจุงุช (Warnings)</h2>
                        <p class="text-slate-400 text-lg">ุชุญูู ูู ุงูุนููุจุงุช ุงูุชููุงุฆูุฉุ ููู ุจุชุฎุตูุต ุงูุฃุณุจุงุจ ุงูุฌุงูุฒุฉ ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-orange-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุญุฏ ุงูุฃูุตู ููุชุญุฐูุฑุงุช (Max Warnings)</label>
                                <input type="number" name="warn_maxWarnings" value="<%= config.warnings.maxWarnings || 3 %>" min="1" max="20"
                                    class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-5 text-white input-glow font-mono text-xl text-center">
                                <p class="mt-2 text-sm text-slate-500">ุนุฏุฏ ุงูุชุญุฐูุฑุงุช ุงูุชู ุฅุฐุง ูุตู ููุง ุงูุนุถู ูุชู ุชุทุจูู ุงูุนููุจุฉ ุชููุงุฆูุงู.</p>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุนููุจุฉ ุงูุชููุงุฆูุฉ (Auto Action)</label>
                                <select name="warn_autoAction" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-5 text-white input-glow cursor-pointer font-bold text-lg">
                                    <option value="timeout" <%= config.warnings.autoAction === 'timeout' ? 'selected' : '' %>>โณ ุฅุณูุงุช (Timeout) ููุฏุฉ 24 ุณุงุนุฉ</option>
                                    <option value="kick" <%= config.warnings.autoAction === 'kick' ? 'selected' : '' %>>๐ข ุทุฑุฏ ูู ุงูุณูุฑูุฑ (Kick)</option>
                                    <option value="ban" <%= config.warnings.autoAction === 'ban' ? 'selected' : '' %>>๐จ ุญุธุฑ ููุงุฆู (Ban)</option>
                                </select>
                            </div>
                        </div>

                        <hr class="border-dark-700 my-8">
                        <h3 class="text-2xl font-bold text-white mb-8 flex items-center"><span class="mr-3">๐</span> ุงูุฃุณุจุงุจ ุงูุฌุงูุฒุฉ (Preset Reasons)</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฃุณุจุงุจ ุจุงูุนุฑุจูุฉ (ุณุทุฑ ููู ุณุจุจ)</label>
                                <textarea name="warn_presetReasons_ar" rows="5" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow leading-relaxed resize-y"><%= (config.warnings.presetReasons && config.warnings.presetReasons.ar && config.warnings.presetReasons.ar.length > 0) ? config.warnings.presetReasons.ar.join('\n') : 'ุณุจ ูุดุชู\nูุดุฑ ุฑูุงุจุท\nุฅุฒุนุงุฌ ุงูุฅุฏุงุฑุฉ\nุณุจุงู\nูุฎุงููุฉ ููุงููู ุงูุชุฑูุฏ' %></textarea>
                            </div>
                            
                            <div dir="ltr">
                                <label class="block text-sm font-bold text-slate-300 mb-3 text-right">ุงูุฃุณุจุงุจ ุจุงูุฅูุฌููุฒูุฉ (English Reasons)</label>
                                <textarea name="warn_presetReasons_en" rows="5" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow leading-relaxed resize-y"><%= (config.warnings.presetReasons && config.warnings.presetReasons.en && config.warnings.presetReasons.en.length > 0) ? config.warnings.presetReasons.en.join('\n') : 'Swearing\nPosting Links\nStaff Disrespect\nSpam\nScam Attempt' %></textarea>
                            </div>
                        </div>
                        <p class="mt-4 text-sm text-amber-500 font-bold text-center">ุณุชุธูุฑ ูุฐู ุงูุฃุณุจุงุจ ููุงุฆูุฉ ุฃุฒุฑุงุฑ ููุฅุฏุงุฑู ุนูุฏ ูุชุงุจุฉ ุฃูุฑ ุงูุชุญุฐูุฑ ูุณูููุฉ ุงูุงุฎุชูุงุฑ.</p>
                    </div>
                </div>

                <div id="section-welcome" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุชุฑุญูุจ ูุงููุบุงุฏุฑุฉ (Welcomer)</h2>
                            <p class="text-slate-400 text-lg">ุงุณุชูุจู ุฃุนุถุงุก ุณูุฑูุฑู ุงูุฌุฏุฏ ุจุฑุณุงุฆู ูุฎุตุตุฉ ูุตูุฑ ุงุญุชุฑุงููุฉ.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงูุชุฑุญูุจ</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="wel_enabled" id="wel_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.welcomeSystem.enabled ? 'checked' : '' %>>
                                <label for="wel_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-pink-500 space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุงูุชุฑุญูุจ (Welcome Channel)</label>
                                <select name="wel_channelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ุงุฎุชุฑ ุฑูู ุงูุชุฑุญูุจ --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.welcomeSystem.channelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ููู ุฅููุจุฏ ุงูุชุฑุญูุจ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="wel_color_picker" value="<%= config.welcomeSystem.embedColor || '#3ba55d' %>" class="h-14 w-14 rounded-xl cursor-pointer bg-dark-900 border border-dark-700 p-1" onchange="document.getElementById('wel_embedColor').value = this.value">
                                    <input type="text" id="wel_embedColor" name="wel_embedColor" value="<%= config.welcomeSystem.embedColor || '#3ba55d' %>" class="flex-1 bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-4 text-white input-glow font-mono text-lg uppercase" oninput="document.getElementById('wel_color_picker').value = this.value">
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3 flex justify-between">
                                <span>ุฑุณุงูุฉ ุงูุชุฑุญูุจ (Welcome Message)</span>
                                <span class="text-xs text-slate-500">ุงููุชุบูุฑุงุช: {user}, {server}, {memberCount}</span>
                            </label>
                            <textarea name="wel_messageText" rows="3" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-white input-glow resize-y"><%= config.welcomeSystem.messageText || 'ูุฑุญุจุงู ุจู {user} ูู ุณูุฑูุฑ {server}! ููุฑุชูุง ูุง ุบุงูู. ๐\nุฃูุช ุงูุนุถู ุฑูู {memberCount}!' %></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุตูุฑุฉ ุงูุชุฑุญูุจ (Image URL - ุงุฎุชูุงุฑู)</label>
                            <input type="text" name="wel_imageUrl" value="<%= config.welcomeSystem.imageUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3.5 px-5 text-white input-glow" placeholder="https://example.com/welcome-image.png">
                        </div>
                    </div>
                </div>

                <div id="section-auto_roles" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุฑุชุจ ูุงูุฑุฏ ุงูุชููุงุฆู</h2>
                        <p class="text-slate-400 text-lg">ุฅุนุทุงุก ุฑุชุจ ุชููุงุฆูุฉ ููุฃุนุถุงุก ุงูุฌุฏุฏุ ูุชุญุฏูุฏ ูููุงุช ูุฑุฏ ุนูููุง ุงูุจูุช ููุฑุงู.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-fuchsia-500 space-y-8">
                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3 flex items-center"><span class="mr-2">๐ค</span> ุงูุฑุชุจ ุงูุชููุงุฆูุฉ (Auto-Roles)</label>
                            <select name="autoRoles" multiple class="w-full h-32 bg-dark-900 border border-dark-700 rounded-2xl py-3 px-4 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                <% serverRoles.forEach(role => { %>
                                    <option value="<%= role.id %>" <%= (config.autoRoles && config.autoRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                <% }) %>
                            </select>
                            <p class="mt-2 text-xs text-slate-500">ุณูุชู ุฅุนุทุงุก ูุฐู ุงูุฑุชุจ ูุฃู ุนุถู ุฌุฏูุฏ ุจูุฌุฑุฏ ุฏุฎููู ุงูุณูุฑูุฑ (ุงุถุบุท Ctrl ูุชุญุฏูุฏ ุฃูุซุฑ ูู ุฑุชุจุฉ).</p>
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3 flex justify-between">
                                <span>ุงูุฑุฏูุฏ ุงูุชููุงุฆูุฉ (Auto-Responders JSON)</span>
                                <span class="text-fuchsia-500 text-xs bg-fuchsia-500/10 px-2 py-1 rounded">Advanced</span>
                            </label>
                            <textarea name="autoRespondersData" rows="6" dir="ltr" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-emerald-400 input-glow font-mono text-sm leading-relaxed resize-y"><%= JSON.stringify(config.autoResponders && config.autoResponders.length > 0 ? config.autoResponders : [{triggerWord: "ุงูุณูุงู ุนูููู", replyMessage: "ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู ๐น", exactMatch: false}], null, 4) %></textarea>
                            <p class="mt-2 text-xs text-slate-500 text-left" dir="ltr">Format: [{"triggerWord": "word", "replyMessage": "reply", "exactMatch": false}]</p>
                        </div>
                    </div>
                </div>

                <div id="section-protection" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ูุธุงู ุงูุญูุงูุฉ (Security & Anti-Nuke)</h2>
                        <p class="text-slate-400 text-lg">ุญุตู ุณูุฑูุฑู ุถุฏ ุงูุณุจุงูุ ุงูุฑูุงุจุท ุงูุฎุจูุซุฉุ ูุงูุชุฎุฑูุจ ุงูุฏุงุฎูู.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-red-600 space-y-8">
                        
                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h3 class="text-xl font-bold text-white flex items-center"><span class="mr-3">๐</span> ููุน ุงูุฑูุงุจุท (Anti-Links)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุญุฐู ุงูุฑูุงุจุท ุชููุงุฆูุงู ุจุงุณุชุซูุงุก ุงูุฑุชุจ ุงููุณููุญ ููุง.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="prot_antiLinkEnabled" id="prot_antiLinkEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiLinkEnabled ? 'checked' : '' %>>
                                    <label for="prot_antiLinkEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุชุจ ุงููุณุชุซูุงุฉ ูู ููุน ุงูุฑูุงุจุท (Allowed Roles)</label>
                                <select name="prot_antiLinkAllowedRoles" multiple class="w-full h-24 bg-dark-900 border border-dark-700 rounded-xl py-2 px-3 text-white input-glow cursor-pointer font-medium custom-scrollbar">
                                    <% serverRoles.forEach(role => { %>
                                        <option value="<%= role.id %>" <%= (config.protection.antiLinkAllowedRoles && config.protection.antiLinkAllowedRoles.includes(role.id)) ? 'selected' : '' %>><%= role.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <div class="p-6 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h3 class="text-xl font-bold text-white flex items-center"><span class="mr-3">๐</span> ููุน ุงูุณุจุงู ูุงูุชูุฑุงุฑ (Anti-Spam)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุชุทุจูู ุนููุจุฉ ุชููุงุฆูุฉ ุนูุฏ ุฅุฑุณุงู ุฑุณุงุฆู ุณุฑูุนุฉ ูุชุชุงููุฉ.</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="prot_antiSpamEnabled" id="prot_antiSpamEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiSpamEnabled ? 'checked' : '' %>>
                                    <label for="prot_antiSpamEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฅุฌุฑุงุก ุงูุชููุงุฆู ููุณุจุงู</label>
                                <select name="prot_antiSpamAction" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow cursor-pointer font-bold">
                                    <option value="mute" <%= config.protection.antiSpamAction === 'mute' ? 'selected' : '' %>>ุฅุณูุงุช (Timeout)</option>
                                    <option value="warn" <%= config.protection.antiSpamAction === 'warn' ? 'selected' : '' %>>ุฅุนุทุงุก ุชุญุฐูุฑ (Warn)</option>
                                    <option value="delete" <%= config.protection.antiSpamAction === 'delete' ? 'selected' : '' %>>ุญุฐู ุงูุฑุณุงุฆู ููุท</option>
                                </select>
                            </div>
                        </div>

                        <div class="p-6 bg-red-900/10 rounded-2xl border border-red-600/30">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h3 class="text-xl font-bold text-red-400 flex items-center"><span class="mr-3">โข๏ธ</span> ููุงูุญุฉ ุงูุบุฒู ูุงูุชุฎุฑูุจ (Anti-Nuke)</h3>
                                    <p class="text-sm text-slate-400 mt-1">ุญูุงูุฉ ุงูุณูุฑูุฑ ูู ุงูุฅุฏุงุฑููู ุงููุฎุชุฑููู (ููุน ุญุฐู ุงูุฑููุงุช ูุงูุจุงูุฏ ุงูุฌูุงุนู).</p>
                                </div>
                                <div class="relative inline-block w-14 align-middle select-none">
                                    <input type="checkbox" name="prot_antiNukeEnabled" id="prot_antiNukeEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.protection.antiNukeEnabled ? 'checked' : '' %>>
                                    <label for="prot_antiNukeEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฃูุตู ุนุฏุฏ ูุญุฐู ุงูุฑููุงุช ูู ุงูุฏูููุฉ</label>
                                    <input type="number" name="prot_maxChannelDeletesPerMinute" value="<%= config.protection.maxChannelDeletesPerMinute || 3 %>" min="1" max="10" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-center">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-300 mb-3">ุฃูุตู ุนุฏุฏ ููุจุงูุฏ ูู ุงูุฏูููุฉ</label>
                                    <input type="number" name="prot_maxBanPerMinute" value="<%= config.protection.maxBanPerMinute || 3 %>" min="1" max="10" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-center">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

<div id="section-economy" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุงูุชุตุงุฏ ูุงูุฃูุนุงุจ (Economy)</h2>
                            <p class="text-slate-400 text-lg">ุชุญูู ูู ุฃููุงู ุงูุณูุฑูุฑุ ุงูุฌูุงุฆุฒ ุงูููููุฉุ ูุถุฑูุจุฉ ุงูุชุญููู.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงูุงูุชุตุงุฏ</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="eco_enabled" id="eco_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.economy.enabled !== false ? 'checked' : '' %>>
                                <label for="eco_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-yellow-400 space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุงุชุจ ุงููููู (ุงูุญุฏ ุงูุฃุฏูู)</label>
                                <input type="number" name="eco_dailyMin" value="<%= config.economy.dailyMin || 1000 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุงูุฑุงุชุจ ุงููููู (ุงูุญุฏ ุงูุฃูุตู)</label>
                                <input type="number" name="eco_dailyMax" value="<%= config.economy.dailyMax || 5000 %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุถุฑูุจุฉ ุงูุชุญููู (%)</label>
                                <input type="number" name="eco_transferTaxPercentage" value="<%= config.economy.transferTaxPercentage || 5 %>" min="0" max="100" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-mono font-bold text-red-400">
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-5 bg-dark-900/50 rounded-2xl border border-dark-700">
                            <div>
                                <h3 class="text-lg font-bold text-white">ุชูุนูู ุงูุฃูุนุงุจ (Games & Casino)</h3>
                                <p class="text-sm text-slate-400 mt-1">ุงูุณูุงุญ ููุฃุนุถุงุก ุจูุนุจ ุฃูุนุงุจ ุงูุญุธ ูุฒูุงุฏุฉ ุฃููุงููู.</p>
                            </div>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="eco_gamesEnabled" id="eco_gamesEnabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.economy.gamesEnabled !== false ? 'checked' : '' %>>
                                <label for="eco_gamesEnabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section-leveling" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ูุธุงู ุงููููุงุช (Leveling)</h2>
                            <p class="text-slate-400 text-lg">ููุงูุฃุฉ ุงูุฃุนุถุงุก ุงููุชูุงุนููู ูู ุงูุณูุฑูุฑ ุจููุงุท ุฎุจุฑุฉ ูุฑุชุจ.</p>
                        </div>
                        <div class="flex items-center bg-dark-800 p-3 rounded-2xl border border-dark-700 shadow-lg">
                            <span class="mr-4 ml-2 font-bold text-white">ุชูุนูู ุงููููุงุช</span>
                            <div class="relative inline-block w-14 align-middle select-none">
                                <input type="checkbox" name="lvl_enabled" id="lvl_enabled" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer" <%= config.leveling.enabled !== false ? 'checked' : '' %>>
                                <label for="lvl_enabled" class="toggle-label block overflow-hidden h-7 rounded-full bg-slate-600 cursor-pointer" style="width: 3.5rem;"></label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-blue-400 space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑูู ุฅุดุนุงุฑุงุช ุงูุชูููู (Level Up Channel)</label>
                                <select name="lvl_levelUpChannelId" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-3.5 px-4 text-white input-glow cursor-pointer font-medium">
                                    <option value="">-- ููุณ ุงูุฑูู ุงูุชู ููุชุจ ูููุง ุงูุนุถู --</option>
                                    <% textChannels.forEach(ch => { %>
                                        <option value="<%= ch.id %>" <%= config.leveling.levelUpChannelId === ch.id ? 'selected' : '' %>>๐ฌ <%= ch.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุณุงูุฉ ุงูุชูููู (ุงููุชุบูุฑุงุช: {user}, {level})</label>
                                <input type="text" name="lvl_levelUpMessage" value="<%= config.leveling.levelUpMessage || 'ูุจุฑูู {user}! ูุตูุช ูููุณุชูู **{level}** ๐' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3 flex justify-between">
                                <span>ุฌูุงุฆุฒ ุงูุฑุชุจ ุนูุฏ ุงููุตูู ููุณุชูู ูุนูู (Role Rewards - JSON)</span>
                                <span class="text-blue-400 text-xs bg-blue-400/10 px-2 py-1 rounded">Advanced</span>
                            </label>
                            <textarea name="lvl_roleRewardsData" rows="6" dir="ltr" class="w-full bg-dark-900 border border-dark-700 rounded-2xl py-4 px-5 text-emerald-400 input-glow font-mono text-sm leading-relaxed resize-y"><%= JSON.stringify(config.leveling.roleRewards && config.leveling.roleRewards.length > 0 ? config.leveling.roleRewards : [{levelRequired: 5, roleId: "ID_HERE"}, {levelRequired: 10, roleId: "ID_HERE"}], null, 4) %></textarea>
                            <p class="mt-2 text-xs text-slate-500 text-left" dir="ltr">Format: [{"levelRequired": 5, "roleId": "123456789"}]</p>
                        </div>
                    </div>
                </div>

                <div id="section-embeds" class="settings-section max-w-5xl mx-auto">
                    <div class="mb-10">
                        <h2 class="text-4xl font-black text-white mb-3 tracking-tight">ุงูุชุตููู ูุงูุฃููุงู (Global Theme)</h2>
                        <p class="text-slate-400 text-lg">ุชุฎุตูุต ููุชุฑ ุงูุจูุช (Footer) ูุงูุตูุฑุฉ ุงูุฌุงูุจูุฉ (Thumbnail) ูุงูุฃููุงู ุงูุฃุณุงุณูุฉ.</p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 mb-8 border-t-4 border-t-white space-y-8">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ูุต ุงูููุชุฑ (Footer Text)</label>
                                <input type="text" name="emb_footerText" value="<%= config.embedSetup?.footerText || 'Enterprise System ยฉ 2024' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow font-bold">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุฃููููุฉ ุงูููุชุฑ (Footer Icon URL)</label>
                                <input type="text" name="emb_footerIconUrl" value="<%= config.embedSetup?.footerIconUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow" placeholder="https://...">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-slate-300 mb-3">ุฑุงุจุท ุงูุตูุฑุฉ ุงูุฌุงูุจูุฉ ุงูููุญุฏุฉ (Thumbnail URL - ุชุธูุฑ ุฃุนูู ูููู ุงูุฅููุจุฏ)</label>
                            <input type="text" name="emb_thumbnailUrl" value="<%= config.embedSetup?.thumbnailUrl || '' %>" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white input-glow" placeholder="https://...">
                        </div>

                        <hr class="border-dark-700 my-6">

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="p-4 bg-dark-900/50 rounded-xl border border-emerald-500/30">
                                <label class="block text-sm font-bold text-emerald-400 mb-4">โ ููู ุฑุณุงุฆู ุงููุฌุงุญ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_success_picker" value="<%= config.embedSetup?.successColor || '#3ba55d' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-700" onchange="document.getElementById('emb_successColor').value = this.value">
                                    <input type="text" id="emb_successColor" name="emb_successColor" value="<%= config.embedSetup?.successColor || '#3ba55d' %>" class="w-full bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase" oninput="document.getElementById('emb_success_picker').value = this.value">
                                </div>
                            </div>
                            
                            <div class="p-4 bg-dark-900/50 rounded-xl border border-red-500/30">
                                <label class="block text-sm font-bold text-red-400 mb-4">โ ููู ุฑุณุงุฆู ุงูุฎุทุฃ</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_error_picker" value="<%= config.embedSetup?.errorColor || '#ed4245' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-700" onchange="document.getElementById('emb_errorColor').value = this.value">
                                    <input type="text" id="emb_errorColor" name="emb_errorColor" value="<%= config.embedSetup?.errorColor || '#ed4245' %>" class="w-full bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase" oninput="document.getElementById('emb_error_picker').value = this.value">
                                </div>
                            </div>

                            <div class="p-4 bg-dark-900/50 rounded-xl border border-brand/30">
                                <label class="block text-sm font-bold text-brand-light mb-4">โน๏ธ ุงูููู ุงูุฃุณุงุณู (Primary)</label>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <input type="color" id="emb_primary_picker" value="<%= config.embedSetup?.primaryColor || '#5865F2' %>" class="h-10 w-10 rounded cursor-pointer bg-dark-900 border border-dark-700" onchange="document.getElementById('emb_primaryColor').value = this.value">
                                    <input type="text" id="emb_primaryColor" name="emb_primaryColor" value="<%= config.embedSetup?.primaryColor || '#5865F2' %>" class="w-full bg-dark-800 border border-dark-700 rounded py-2 px-3 text-white font-mono text-sm uppercase" oninput="document.getElementById('emb_primary_picker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sticky bottom-0 bg-gradient-to-t from-dark-900 via-dark-900 to-transparent pt-10 pb-8 flex justify-end z-50">
                    <button type="submit" class="flex items-center px-10 py-5 bg-emerald-500 hover:bg-emerald-400 text-dark-900 text-xl font-black rounded-2xl shadow-[0_0_30px_rgba(16,185,129,0.4)] transition-all duration-300 transform hover:-translate-y-2 hover:scale-105">
                        <span class="mr-3 ml-2 text-2xl">๐พ</span> ุญูุธ ุฌููุน ุงูุชุนุฏููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
                    </button>
                </div>

            </form>
            </div>
    </main>

    <script>
        // 1. ูุธุงู ุงูุชููู ุจูู ุงูุฃูุณุงู
        function switchSection(targetSectionId) {
            document.querySelectorAll('.settings-section').forEach(section => section.classList.remove('active'));
            const target = document.getElementById('section-' + targetSectionId);
            if (target) target.classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-brand', 'text-white', 'shadow-lg', 'shadow-brand/20', 'active-nav');
                btn.classList.add('text-slate-400', 'hover:bg-dark-700', 'hover:text-white');
            });

            const activeBtn = document.querySelector(`.nav-btn[data-target="${targetSectionId}"]`);
            if (activeBtn) {
                activeBtn.classList.remove('text-slate-400', 'hover:bg-dark-700', 'hover:text-white');
                activeBtn.classList.add('bg-brand', 'text-white', 'shadow-lg', 'shadow-brand/20', 'active-nav');
            }
            document.getElementById('main-scroll-area').scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ููุน ุงูุญูุธ ุงูุนุดูุงุฆู ุนูุฏ ุถุบุท Enter
        document.getElementById('mega-settings-form').addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && event.target.tagName !== 'TEXTAREA') event.preventDefault();
        });

        // ==========================================================================
        // 2. ูุญุฑู ุงูุจุงููุงุช ุงูุฏููุงููููุฉ (Dynamic Panels Engine)
        // ==========================================================================
        const panelsContainer = document.getElementById('dynamic-panels-container');
        const hiddenInput = document.getElementById('ticketPanelsData');
        let panelsArray = [];

        try {
            panelsArray = JSON.parse(hiddenInput.value || '[]');
        } catch (e) {
            panelsArray = [];
        }

        // ุฌูุจ ุงูุฑููุงุช ูุงูุฃูุณุงู ุงููุชุงุญุฉ ูู ุงูููุฏ ุงูุฎููู ูุชุญููููุง ุฅูู ุฎูุงุฑุงุช HTML
        const textChannelsHTML = `<%- textChannels.map(ch => `<option value="${ch.id}">๐ฌ ${ch.name}</option>`).join('') %>`;
        const categoriesHTML = `<%- categories.map(cat => `<option value="${cat.id}">๐ ${cat.name}</option>`).join('') %>`;

        function renderAllPanels() {
            panelsContainer.innerHTML = '';
            if (panelsArray.length === 0) {
                panelsContainer.innerHTML = `
                    <div class="text-center py-10 bg-dark-900/50 rounded-2xl border border-dashed border-dark-700">
                        <span class="text-4xl mb-4 block">๐๏ธ</span>
                        <h3 class="text-xl font-bold text-white mb-2">ูุง ููุฌุฏ ุจุงููุงุช ุชุฐุงูุฑ ุฅุถุงููุฉ</h3>
                        <p class="text-slate-500">ุงุถุบุท ุนูู ุงูุฒุฑ ุจุงูุฃุณูู ูุฅูุดุงุก ุจุงูู ุฌุฏูุฏ.</p>
                    </div>`;
                return;
            }

            panelsArray.forEach((panel, pIndex) => {
                let buttonsHTML = '';
                if (panel.buttons && panel.buttons.length > 0) {
                    panel.buttons.forEach((btn, bIndex) => {
                        buttonsHTML += `
                            <div class="bg-dark-900 p-5 rounded-2xl border border-dark-700 mb-4 relative overflow-hidden">
                                <div class="absolute top-0 right-0 bg-brand text-xs font-bold px-3 py-1 rounded-bl-xl">ุฒุฑ ${bIndex + 1}</div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                                    <div>
                                        <label class="block text-xs text-slate-400 mb-1">ุงุณู ุงูุฒุฑ (Label)</label>
                                        <input type="text" class="w-full bg-dark-800 border border-dark-700 rounded-lg p-2 text-white" value="${btn.label}" onchange="updateButton(${pIndex}, ${bIndex}, 'label', this.value)">
                                    </div>
                                    <div>
                                        <label class="block text-xs text-slate-400 mb-1">ููู ุงูุฅููุจุฏ ุงูุฏุงุฎูู ููุชุฐูุฑุฉ</label>
                                        <input type="color" class="w-full h-10 rounded-lg bg-dark-800 border border-dark-700 p-1 cursor-pointer" value="${btn.insideEmbedColor || '#2b2d31'}" onchange="updateButton(${pIndex}, ${bIndex}, 'insideEmbedColor', this.value)">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-xs text-slate-400 mb-1 flex justify-between">
                                            <span>ุฃุณุฆูุฉ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุฒุฑ (Modals - JSON)</span>
                                            <span class="text-xs text-amber-500">ุงุชุฑูู ูุงุฑุบุงู ุฅู ูู ุชุฑุฏ ูุงูุฐุฉ</span>
                                        </label>
                                        <textarea class="w-full bg-dark-800 border border-dark-700 rounded-lg p-2 text-emerald-400 font-mono text-xs h-24" dir="ltr" onchange="updateButtonJSON(${pIndex}, ${bIndex}, 'modalFields', this.value)">${JSON.stringify(btn.modalFields || [], null, 2)}</textarea>
                                    </div>
                                </div>
                                <button type="button" onclick="removeButtonUI(${pIndex}, ${bIndex})" class="mt-4 text-xs bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white px-3 py-1.5 rounded-lg transition-colors">๐๏ธ ุญุฐู ูุฐุง ุงูุฒุฑ</button>
                            </div>
                        `;
                    });
                } else {
                    buttonsHTML = `<p class="text-sm text-slate-500 italic mb-4">ูุง ููุฌุฏ ุฃุฒุฑุงุฑ ูู ูุฐุง ุงูุจุงูู.</p>`;
                }

                panelsContainer.innerHTML += `
                    <div class="bg-dark-800 border border-dark-700 rounded-3xl p-6 shadow-lg">
                        <div class="flex justify-between items-center mb-6 border-b border-dark-700 pb-4">
                            <h4 class="text-2xl font-bold text-white flex items-center"><span class="bg-blue-500 w-2 h-6 rounded-full mr-3 inline-block"></span> ุจุงูู: ${panel.panelTitle || 'ุจุฏูู ุงุณู'}</h4>
                            <button type="button" onclick="removePanelUI(${pIndex})" class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-red-600/20">๐๏ธ ุญุฐู ุงูุจุงูู</button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ุนููุงู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู</label>
                                <input type="text" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white" value="${panel.panelTitle}" onchange="updatePanel(${pIndex}, 'panelTitle', this.value)">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ููู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู</label>
                                <input type="color" class="w-full h-12 rounded-xl bg-dark-900 border border-dark-700 p-1 cursor-pointer" value="${panel.panelColor || '#2b2d31'}" onchange="updatePanel(${pIndex}, 'panelColor', this.value)">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-slate-300 mb-2">ูุตู ุงูุฅููุจุฏ ุงูุฎุงุฑุฌู (ูุฏุนู ุงูุฒุฎุงุฑู)</label>
                                <textarea rows="3" class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white resize-y" onchange="updatePanel(${pIndex}, 'panelDescription', this.value)">${panel.panelDescription || ''}</textarea>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ุงูุฑูู ุงูุชู ุณูุฑุณู ูููุง ุงูุจุงูู</label>
                                <select class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white" onchange="updatePanel(${pIndex}, 'channelId', this.value)">
                                    <option value="">-- ุงุฎุชุฑ ุงูุฑูู --</option>
                                    ${textChannelsHTML.replace(`value="${panel.channelId}"`, `value="${panel.channelId}" selected`)}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-300 mb-2">ุงููุณู (Category) ููุชุญ ุงูุชุฐุงูุฑ ููู</label>
                                <select class="w-full bg-dark-900 border border-dark-700 rounded-xl py-3 px-4 text-white" onchange="updatePanel(${pIndex}, 'categoryId', this.value)">
                                    <option value="">-- ุงุฎุชุฑ ุงููุณู --</option>
                                    ${categoriesHTML.replace(`value="${panel.categoryId}"`, `value="${panel.categoryId}" selected`)}
                                </select>
                            </div>
                        </div>

                        <div class="bg-dark-900/50 p-5 rounded-2xl border border-dark-700">
                            <h5 class="text-lg font-bold text-white mb-4">๐ ุฃุฒุฑุงุฑ ุงูุจุงูู ูููุงูุฐูุง (Modals)</h5>
                            ${buttonsHTML}
                            <button type="button" onclick="addButtonUI(${pIndex})" class="w-full py-3 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-xl border border-dashed border-slate-500 transition-colors">โ ุฅุถุงูุฉ ุฒุฑ ุฌุฏูุฏ ููุฐุง ุงูุจุงูู</button>
                        </div>
                    </div>
                `;
            });
            hiddenInput.value = JSON.stringify(panelsArray);
        }

        function addNewPanelUI() {
            panelsArray.push({
                panelId: 'panel_' + Math.random().toString(36).substring(2, 9),
                panelTitle: 'ุจุงูู ุฌุฏูุฏ',
                panelDescription: 'ููุชูุงุตู ูุน ุงูุฅุฏุงุฑุฉุ ุงุถุบุท ุนูู ุงูุฒุฑ ุจุงูุฃุณูู.',
                panelColor: '#5865F2',
                buttons: [{
                    id: 'btn_' + Math.random().toString(36).substring(2, 9),
                    label: 'ูุชุญ ุชุฐูุฑุฉ',
                    insideEmbedColor: '#5865F2',
                    modalFields: []
                }]
            });
            renderAllPanels();
        }

        function removePanelUI(pIndex) {
            if(confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุจุงูู ุจุงููุงููุ')) { panelsArray.splice(pIndex, 1); renderAllPanels(); }
        }

        function addButtonUI(pIndex) {
            if(!panelsArray[pIndex].buttons) panelsArray[pIndex].buttons = [];
            panelsArray[pIndex].buttons.push({
                id: 'btn_' + Math.random().toString(36).substring(2, 9),
                label: 'ุฒุฑ ุฌุฏูุฏ',
                insideEmbedColor: '#2b2d31',
                modalFields: []
            });
            renderAllPanels();
        }

        function removeButtonUI(pIndex, bIndex) {
            panelsArray[pIndex].buttons.splice(bIndex, 1); renderAllPanels();
        }

        function updatePanel(pIndex, key, value) {
            panelsArray[pIndex][key] = value; hiddenInput.value = JSON.stringify(panelsArray);
        }

        function updateButton(pIndex, bIndex, key, value) {
            panelsArray[pIndex].buttons[bIndex][key] = value; hiddenInput.value = JSON.stringify(panelsArray);
        }

        function updateButtonJSON(pIndex, bIndex, key, value) {
            try {
                panelsArray[pIndex].buttons[bIndex][key] = JSON.parse(value);
                hiddenInput.value = JSON.stringify(panelsArray);
            } catch (e) { console.error('Invalid JSON for button fields'); }
        }

        // ุชุดุบูู ูุธุงู ุงูุจุงููุงุช ุนูุฏ ูุชุญ ุงูุตูุญุฉ
        renderAllPanels();
        
        // ุชุญุฏูุซ ุฃุฎูุฑ ูููุชุบูุฑ ุงููุฎูู ูุจู ุงูุฅุฑุณุงู (Submit)
        document.getElementById('mega-settings-form').addEventListener('submit', function() {
            document.getElementById('ticketPanelsData').value = JSON.stringify(panelsArray);
        });
    </script>
</body>
</html>
